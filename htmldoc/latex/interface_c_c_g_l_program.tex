\hypertarget{interface_c_c_g_l_program}{\section{C\-C\-G\-L\-Program Class Reference}
\label{interface_c_c_g_l_program}\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}}
}


{\ttfamily \#import $<$C\-C\-G\-L\-Program.\-h$>$}

Inheritance diagram for C\-C\-G\-L\-Program\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{interface_c_c_g_l_program}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
(id) -\/ \hyperlink{interface_c_c_g_l_program_a196edfd2692a59302aac9b13bff1cbee}{init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:}
\item 
(id) -\/ \hyperlink{interface_c_c_g_l_program_ade25f9a8a3e0f6fda06e0326c239b877}{init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a5148246bb5931a47e07eafe9b8d3b891}{add\-Attribute\-:index\-:}
\item 
(B\-O\-O\-L) -\/ \hyperlink{interface_c_c_g_l_program_a595071a9b680374e23f1cd93b5b1fda7}{link}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a10ff7a477f3cf4a4085b415f88921e01}{use}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a9ad6bb937bd9ca7c8bb0dbfd21b3cd8a}{update\-Uniforms}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a98528f310d68740dfc4a1f8ec6ad063c}{set\-Uniform\-Location\-:with\-I1\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a91c55a8808fdb0dde12aaa07fd7762f9}{set\-Uniform\-Location\-:with\-F1\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_aa4d91f3af30a817a0a9bc96353e10900}{set\-Uniform\-Location\-:with\-F1\-:f2\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_aac05353cce6f4f8dba00eab5029c3fb2}{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a65c5d76b225f41939489c846071c3a06}{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a2938f2e5f966e6c58155954c9b942173}{set\-Uniform\-Location\-:with2fv\-:count\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a6fb1eafbc2ff546d3c7f804448b9551c}{set\-Uniform\-Location\-:with3fv\-:count\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_a7ac9cdbed7bd66436f20b0f42edb6e06}{set\-Uniform\-Location\-:with4fv\-:count\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_ae818b6b75b4682f5b6ed8c41a66e83d7}{set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:}
\item 
(void) -\/ \hyperlink{interface_c_c_g_l_program_ab7d2c467cf1e28fbb8c28d352fc1bbb7}{set\-Uniforms\-For\-Builtins}
\item 
((\-\_\-\-\_\-deprecated\-\_\-\-\_\-) -\/ \hyperlink{interface_c_c_g_l_program_a71972dcb45864fe136839f8c70ddbf29}{\-\_\-\-\_\-attribute\-\_\-\-\_\-}
\item 
(N\-S\-String $\ast$) -\/ \hyperlink{interface_c_c_g_l_program_a9425ba6c62e5b66a82c9b6259643b8a5}{vertex\-Shader\-Log}
\item 
(N\-S\-String $\ast$) -\/ \hyperlink{interface_c_c_g_l_program_a22a3e99e7645c1f523438f5a022bb2ce}{fragment\-Shader\-Log}
\item 
(N\-S\-String $\ast$) -\/ \hyperlink{interface_c_c_g_l_program_aa722d7c2b1d445224d6471c19ee3573b}{program\-Log}
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{interface_c_c_g_l_program_a06d7d29e3aff71a407d7f1b0a7fb885a}{G\-Luint {\bfseries program\-\_\-}}\label{interface_c_c_g_l_program_a06d7d29e3aff71a407d7f1b0a7fb885a}

\item 
\hypertarget{interface_c_c_g_l_program_a0da74d40b50b277879762d4218a7469e}{G\-Luint {\bfseries vert\-Shader\-\_\-}}\label{interface_c_c_g_l_program_a0da74d40b50b277879762d4218a7469e}

\item 
\hypertarget{interface_c_c_g_l_program_a662dd6af1ca6bc3aafda4e04ff142e6d}{G\-Luint {\bfseries frag\-Shader\-\_\-}}\label{interface_c_c_g_l_program_a662dd6af1ca6bc3aafda4e04ff142e6d}

\item 
\hypertarget{interface_c_c_g_l_program_a669a319b6978d213a81f4e47140801a9}{G\-Lint {\bfseries uniforms\-\_\-} \mbox{[}k\-C\-C\-Uniform\-\_\-\-M\-A\-X\mbox{]}}\label{interface_c_c_g_l_program_a669a319b6978d213a81f4e47140801a9}

\item 
\hypertarget{interface_c_c_g_l_program_ac025933cc3fb7aea91dbf441cf32a90f}{B\-O\-O\-L {\bfseries uses\-Time\-\_\-}}\label{interface_c_c_g_l_program_ac025933cc3fb7aea91dbf441cf32a90f}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{interface_c_c_g_l_program_a79baa793f705c8391af7807c2578375e}{struct \hyperlink{struct__hash_uniform_entry}{\-\_\-hash\-Uniform\-Entry} $\ast$ {\bfseries hash\-For\-Uniforms\-\_\-}}\label{interface_c_c_g_l_program_a79baa793f705c8391af7807c2578375e}

\end{DoxyCompactItemize}
\subsection*{Properties}
\begin{DoxyCompactItemize}
\item 
\hypertarget{interface_c_c_g_l_program_a810fd3dc4113ca3f1f648ed12b488282}{G\-Luint {\bfseries program}}\label{interface_c_c_g_l_program_a810fd3dc4113ca3f1f648ed12b488282}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hyperlink{interface_c_c_g_l_program}{C\-C\-G\-L\-Program} Class that implements a gl\-Program

\begin{DoxySince}{Since}
v2.\-0.\-0 
\end{DoxySince}


\subsection{Member Function Documentation}
\hypertarget{interface_c_c_g_l_program_a71972dcb45864fe136839f8c70ddbf29}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{\-\_\-\-\_\-attribute\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}-\/ ((\-\_\-\-\_\-deprecated\-\_\-\-\_\-) {\bf \-\_\-\-\_\-attribute\-\_\-\-\_\-} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a71972dcb45864fe136839f8c70ddbf29}
Deprecated alias for set\-Uniforms\-For\-Builtins \hypertarget{interface_c_c_g_l_program_a5148246bb5931a47e07eafe9b8d3b891}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!add\-Attribute\-:index\-:@{add\-Attribute\-:index\-:}}
\index{add\-Attribute\-:index\-:@{add\-Attribute\-:index\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{add\-Attribute\-:index\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) add\-Attribute\-: 
\begin{DoxyParamCaption}
\item[{(N\-S\-String $\ast$)}]{attribute\-Name}
\item[{index:(G\-Luint)}]{index}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a5148246bb5931a47e07eafe9b8d3b891}
It will add a new attribute to the shader 

Referenced by C\-C\-Shader\-Cache\-::load\-Default\-Shaders.


\begin{DoxyCode}
                    :(NSString *)attributeName index:(GLuint)index
{
        glBindAttribLocation(program_,
                                                 index,
                                                 [attributeName UTF8String]);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a22a3e99e7645c1f523438f5a022bb2ce}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!fragment\-Shader\-Log@{fragment\-Shader\-Log}}
\index{fragment\-Shader\-Log@{fragment\-Shader\-Log}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{fragment\-Shader\-Log}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (N\-S\-String $\ast$) {\bf fragment\-Shader\-Log} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a22a3e99e7645c1f523438f5a022bb2ce}
returns the fragment\-Shader error log 
\begin{DoxyCode}
{
        return [self logForOpenGLObject:fragShader_
                                           infoCallback:(GLInfoFunction)&
      glGetShaderiv
                                                        logFunc:(GLLogFunction)
      &glGetShaderInfoLog];
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a196edfd2692a59302aac9b13bff1cbee}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:@{init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:}}
\index{init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:@{init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{init\-With\-Vertex\-Shader\-Byte\-Array\-:fragment\-Shader\-Byte\-Array\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (id) init\-With\-Vertex\-Shader\-Byte\-Array\-: 
\begin{DoxyParamCaption}
\item[{(const G\-Lchar$\ast$)}]{v\-Shader\-Byte\-Array}
\item[{fragmentShaderByteArray:(const G\-Lchar$\ast$)}]{f\-Shader\-Byte\-Array}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a196edfd2692a59302aac9b13bff1cbee}
Initializes the \hyperlink{interface_c_c_g_l_program}{C\-C\-G\-L\-Program} with a vertex and fragment with bytes array 

Referenced by init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:.


\begin{DoxyCode}
                                   :(const GLchar *)vShaderByteArray 
      fragmentShaderByteArray:(const GLchar *)fShaderByteArray
{
    if ((self = [super init]) )
    {
        program_ = glCreateProgram();
                
                vertShader_ = fragShader_ = 0;
                
                if( vShaderByteArray ) {
                        
                        if (![self compileShader:&vertShader_
                                                                type:
      GL_VERTEX_SHADER
                                                   byteArray:vShaderByteArray] 
      )
                                CCLOG(@"cocos2d: ERROR: Failed to compile
       vertex shader");
                }
                
        // Create and compile fragment shader
                if( fShaderByteArray ) {
                        if (![self compileShader:&fragShader_
                                                                type:
      GL_FRAGMENT_SHADER
                                                   byteArray:fShaderByteArray] 
      )

                                CCLOG(@"cocos2d: ERROR: Failed to compile
       fragment shader");
                }
                
                if( vertShader_ )
                        glAttachShader(program_, vertShader_);
                
                if( fragShader_ )
                        glAttachShader(program_, fragShader_);
                
                hashForUniforms_ = NULL;
    }
        
    return self;
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_ade25f9a8a3e0f6fda06e0326c239b877}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:@{init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:}}
\index{init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:@{init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{init\-With\-Vertex\-Shader\-Filename\-:fragment\-Shader\-Filename\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (id) init\-With\-Vertex\-Shader\-Filename\-: 
\begin{DoxyParamCaption}
\item[{(N\-S\-String $\ast$)}]{v\-Shader\-Filename}
\item[{fragmentShaderFilename:(N\-S\-String $\ast$)}]{f\-Shader\-Filename}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_ade25f9a8a3e0f6fda06e0326c239b877}
Initializes the \hyperlink{interface_c_c_g_l_program}{C\-C\-G\-L\-Program} with a vertex and fragment with contents of filenames 
\begin{DoxyCode}
                                  :(NSString *)vShaderFilename 
      fragmentShaderFilename:(NSString *)fShaderFilename
{
        
        const GLchar * vertexSource = (GLchar*) [[NSString 
      stringWithContentsOfFile:[[CCFileUtils sharedFileUtils] fullPathFromRelativePathIgnoringResolutions:
      vShaderFilename] encoding:NSUTF8StringEncoding error:nil] UTF8String];
        const GLchar * fragmentSource = (GLchar*) [[NSString 
      stringWithContentsOfFile:[[CCFileUtils sharedFileUtils] 
      fullPathFromRelativePathIgnoringResolutions:fShaderFilename] encoding:NSUTF8StringEncoding error:nil] UTF8String];

        return [self initWithVertexShaderByteArray:vertexSource 
      fragmentShaderByteArray:fragmentSource];
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a595071a9b680374e23f1cd93b5b1fda7}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!link@{link}}
\index{link@{link}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{link}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (B\-O\-O\-L) {\bf link} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a595071a9b680374e23f1cd93b5b1fda7}
links the gl\-Program 

Referenced by C\-C\-Shader\-Cache\-::load\-Default\-Shaders.


\begin{DoxyCode}
{
    NSAssert(program_ != 0, @"Cannot link invalid program");
        
    GLint status = GL_TRUE;
    glLinkProgram(program_);
        
    if (vertShader_)
        glDeleteShader(vertShader_);

    if (fragShader_)
        glDeleteShader(fragShader_);

    vertShader_ = fragShader_ = 0;
        
#if DEBUG
    glGetProgramiv(program_, GL_LINK_STATUS, &status);
    NSString* log = self.programLog;
        
    if (status == GL_FALSE) {
        NSLog(@"cocos2d: ERROR: Failed to link program: %i - %@", program_, log
      );
        ccGLDeleteProgram( program_ );
        program_ = 0;
    }
#endif
        
    return (status == GL_TRUE);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_aa722d7c2b1d445224d6471c19ee3573b}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!program\-Log@{program\-Log}}
\index{program\-Log@{program\-Log}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{program\-Log}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (N\-S\-String $\ast$) {\bf program\-Log} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_aa722d7c2b1d445224d6471c19ee3573b}
returns the program error log 
\begin{DoxyCode}
{
        return [self logForOpenGLObject:program_
                                           infoCallback:(GLInfoFunction)&
      glGetProgramiv
                                                        logFunc:(GLLogFunction)
      &glGetProgramInfoLog];
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a2938f2e5f966e6c58155954c9b942173}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with2fv\-:count\-:@{set\-Uniform\-Location\-:with2fv\-:count\-:}}
\index{set\-Uniform\-Location\-:with2fv\-:count\-:@{set\-Uniform\-Location\-:with2fv\-:count\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with2fv\-:count\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{with2fv:(G\-Lfloat$\ast$)}]{floats}
\item[{count:(N\-S\-U\-Integer)}]{number\-Of\-Arrays}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a2938f2e5f966e6c58155954c9b942173}
calls gl\-Uniform2fv only if the values are different than the previous call for this same shader program. 
\begin{DoxyCode}
                          :(GLint)location with2fv:(GLfloat*)floats count:(
      NSUInteger)numberOfArrays
{
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(float)*2*numberOfArrays];
        
        if( updated )
                glUniform2fv( (GLint)location, (GLsizei)numberOfArrays, floats 
      );
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a6fb1eafbc2ff546d3c7f804448b9551c}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with3fv\-:count\-:@{set\-Uniform\-Location\-:with3fv\-:count\-:}}
\index{set\-Uniform\-Location\-:with3fv\-:count\-:@{set\-Uniform\-Location\-:with3fv\-:count\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with3fv\-:count\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{with3fv:(G\-Lfloat$\ast$)}]{floats}
\item[{count:(N\-S\-U\-Integer)}]{number\-Of\-Arrays}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a6fb1eafbc2ff546d3c7f804448b9551c}
calls gl\-Uniform3fv only if the values are different than the previous call for this same shader program. 
\begin{DoxyCode}
                          :(GLint)location with3fv:(GLfloat*)floats count:(
      NSUInteger)numberOfArrays
{
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(float)*3*numberOfArrays];
        
        if( updated )
                glUniform3fv( (GLint)location, (GLsizei)numberOfArrays, floats 
      );
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a7ac9cdbed7bd66436f20b0f42edb6e06}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with4fv\-:count\-:@{set\-Uniform\-Location\-:with4fv\-:count\-:}}
\index{set\-Uniform\-Location\-:with4fv\-:count\-:@{set\-Uniform\-Location\-:with4fv\-:count\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with4fv\-:count\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{with4fv:(G\-Lvoid$\ast$)}]{floats}
\item[{count:(N\-S\-U\-Integer)}]{number\-Of\-Arrays}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a7ac9cdbed7bd66436f20b0f42edb6e06}
calls gl\-Uniform4fv only if the values are different than the previous call for this same shader program. 

Referenced by cc\-Draw\-Cardinal\-Spline(), cc\-Draw\-Circle(), cc\-Draw\-Cubic\-Bezier(), cc\-Draw\-Line(), cc\-Draw\-Point(), cc\-Draw\-Points(), cc\-Draw\-Poly(), cc\-Draw\-Quad\-Bezier(), and cc\-Draw\-Solid\-Poly().


\begin{DoxyCode}
                          :(GLint)location with4fv:(GLvoid*)floats count:(
      NSUInteger)numberOfArrays
{
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(float)*4*numberOfArrays];
        
        if( updated )
                glUniform4fv( (GLint)location, (GLsizei)numberOfArrays, floats 
      );
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a91c55a8808fdb0dde12aaa07fd7762f9}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-F1\-:@{set\-Uniform\-Location\-:with\-F1\-:}}
\index{set\-Uniform\-Location\-:with\-F1\-:@{set\-Uniform\-Location\-:with\-F1\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-F1\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withF1:(G\-Lfloat)}]{f1}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a91c55a8808fdb0dde12aaa07fd7762f9}
calls gl\-Uniform1f only if the values are different than the previous call for this same shader program. 

Referenced by cc\-Draw\-Point(), and cc\-Draw\-Points().


\begin{DoxyCode}
                          :(GLint)location withF1:(GLfloat)f1
{
        BOOL updated =  [self updateUniformLocation:location withData:&f1 
      sizeOfData:sizeof(f1)*1];
        
        if( updated )
                glUniform1f( (GLint)location, f1);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_aa4d91f3af30a817a0a9bc96353e10900}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-F1\-:f2\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:}}
\index{set\-Uniform\-Location\-:with\-F1\-:f2\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-F1\-:f2\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withF1:(G\-Lfloat)}]{f1}
\item[{f2:(G\-Lfloat)}]{f2}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_aa4d91f3af30a817a0a9bc96353e10900}
calls gl\-Uniform2f only if the values are different than the previous call for this same shader program. 
\begin{DoxyCode}
                          :(GLint)location withF1:(GLfloat)f1 f2:(GLfloat)f2
{
        GLfloat floats[2] = {f1,f2};
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(floats)];
        
        if( updated )
                glUniform2f( (GLint)location, f1, f2);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_aac05353cce6f4f8dba00eab5029c3fb2}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:}}
\index{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withF1:(G\-Lfloat)}]{f1}
\item[{f2:(G\-Lfloat)}]{f2}
\item[{f3:(G\-Lfloat)}]{f3}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_aac05353cce6f4f8dba00eab5029c3fb2}
calls gl\-Uniform3f only if the values are different than the previous call for this same shader program. 
\begin{DoxyCode}
                          :(GLint)location withF1:(GLfloat)f1 f2:(GLfloat)f2 f3
      :(GLfloat)f3
{
        GLfloat floats[3] = {f1,f2,f3};
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(floats)];
        
        if( updated )
                glUniform3f( (GLint)location, f1, f2, f3);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a65c5d76b225f41939489c846071c3a06}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:}}
\index{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:@{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-F1\-:f2\-:f3\-:f4\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withF1:(G\-Lfloat)}]{f1}
\item[{f2:(G\-Lfloat)}]{f2}
\item[{f3:(G\-Lfloat)}]{f3}
\item[{f4:(G\-Lfloat)}]{f4}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a65c5d76b225f41939489c846071c3a06}
calls gl\-Uniform4f only if the values are different than the previous call for this same shader program. 

Referenced by G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Circle(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Polygon(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Segment(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Solid\-Circle(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Solid\-Polygon(), and set\-Uniforms\-For\-Builtins.


\begin{DoxyCode}
                          :(GLint)location withF1:(GLfloat)f1 f2:(GLfloat)f2 f3
      :(GLfloat)f3 f4:(GLfloat)f4
{
        GLfloat floats[4] = {f1,f2,f3,f4};
        BOOL updated =  [self updateUniformLocation:location withData:floats 
      sizeOfData:sizeof(floats)];
        
        if( updated )
                glUniform4f( (GLint)location, f1, f2, f3,f4);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a98528f310d68740dfc4a1f8ec6ad063c}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-I1\-:@{set\-Uniform\-Location\-:with\-I1\-:}}
\index{set\-Uniform\-Location\-:with\-I1\-:@{set\-Uniform\-Location\-:with\-I1\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-I1\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withI1:(G\-Lint)}]{i1}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a98528f310d68740dfc4a1f8ec6ad063c}
calls gl\-Uniform1i only if the values are different than the previous call for this same shader program. 

Referenced by update\-Uniforms.


\begin{DoxyCode}
                          :(GLint)location withI1:(GLint)i1
{
        BOOL updated =  [self updateUniformLocation:location withData:&i1 
      sizeOfData:sizeof(i1)*1];
        
        if( updated )
                glUniform1i( (GLint)location, i1);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_ae818b6b75b4682f5b6ed8c41a66e83d7}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:@{set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:}}
\index{set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:@{set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniform\-Location\-:with\-Matrix4fv\-:count\-:}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) set\-Uniform\-Location\-: 
\begin{DoxyParamCaption}
\item[{(G\-Lint)}]{location}
\item[{withMatrix4fv:(G\-Lvoid$\ast$)}]{matrix\-\_\-array}
\item[{count:(N\-S\-U\-Integer)}]{number\-Of\-Matrix}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_ae818b6b75b4682f5b6ed8c41a66e83d7}
calls gl\-Uniform\-Matrix4fv only if the values are different than the previous call for this same shader program. 

Referenced by set\-Uniforms\-For\-Builtins.


\begin{DoxyCode}
                          :(GLint)location withMatrix4fv:(GLvoid*)matrixArray 
      count:(NSUInteger)numberOfMatrices
{
        BOOL updated =  [self updateUniformLocation:location withData:
      matrixArray sizeOfData:sizeof(float)*16*numberOfMatrices];
        
        if( updated )
                glUniformMatrix4fv( (GLint)location, (GLsizei)numberOfMatrices,
       GL_FALSE, matrixArray);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_ab7d2c467cf1e28fbb8c28d352fc1bbb7}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!set\-Uniforms\-For\-Builtins@{set\-Uniforms\-For\-Builtins}}
\index{set\-Uniforms\-For\-Builtins@{set\-Uniforms\-For\-Builtins}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{set\-Uniforms\-For\-Builtins}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) {\bf set\-Uniforms\-For\-Builtins} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_ab7d2c467cf1e28fbb8c28d352fc1bbb7}
will update the builtin uniforms if they are different than the previous call for this same shader program. 

Referenced by cc\-Draw\-Cardinal\-Spline(), cc\-Draw\-Circle(), cc\-Draw\-Cubic\-Bezier(), cc\-Draw\-Line(), cc\-Draw\-Point(), cc\-Draw\-Points(), cc\-Draw\-Poly(), cc\-Draw\-Quad\-Bezier(), and cc\-Draw\-Solid\-Poly().


\begin{DoxyCode}
{
        kmMat4 matrixP;
        kmMat4 matrixMV;
        kmMat4 matrixMVP;
        
        kmGLGetMatrix(KM_GL_PROJECTION, &matrixP );
        kmGLGetMatrix(KM_GL_MODELVIEW, &matrixMV );
        
        kmMat4Multiply(&matrixMVP, &matrixP, &matrixMV);
        
        [self setUniformLocation:uniforms_[  kCCUniformPMatrix] withMatrix4fv: 
       matrixP.mat count:1];
        [self setUniformLocation:uniforms_[ kCCUniformMVMatrix] withMatrix4fv: 
      matrixMV.mat count:1];
        [self setUniformLocation:uniforms_[kCCUniformMVPMatrix] withMatrix4fv:
      matrixMVP.mat count:1];
        
        if(usesTime_){
                CCDirector *director = [CCDirector sharedDirector];
                // This doesn't give the most accurate global time value.
                // Cocos2D doesn't store a high precision time value, so this
       will have to do.
                // Getting Mach time per frame per shader using time could be
       extremely expensive.
                ccTime time = director.totalFrames*director.animationInterval;
                
                [self setUniformLocation:uniforms_[kCCUniformTime] withF1:time/
      10.0 f2:time f3:time*2 f4:time*4];
                [self setUniformLocation:uniforms_[kCCUniformSinTime] withF1:
      sinf(time/8.0) f2:sinf(time/4.0) f3:sinf(time/2.0) f4:sinf(time)];
                [self setUniformLocation:uniforms_[kCCUniformCosTime] withF1:
      cosf(time/8.0) f2:cosf(time/4.0) f3:cosf(time/2.0) f4:cosf(time)];
        }
        
        if(uniforms_[kCCUniformRandom01] != -1){
                [self setUniformLocation:uniforms_[kCCUniformRandom01] withF1:
      CCRANDOM_0_1() f2:CCRANDOM_0_1() f3:CCRANDOM_0_1() f4:CCRANDOM_0_1()];
        }
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a9ad6bb937bd9ca7c8bb0dbfd21b3cd8a}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!update\-Uniforms@{update\-Uniforms}}
\index{update\-Uniforms@{update\-Uniforms}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{update\-Uniforms}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) {\bf update\-Uniforms} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a9ad6bb937bd9ca7c8bb0dbfd21b3cd8a}
It will create 4 uniforms\-:
\begin{DoxyItemize}
\item k\-C\-C\-Uniform\-P\-Matrix
\item k\-C\-C\-Uniform\-M\-V\-Matrix
\item k\-C\-C\-Uniform\-M\-V\-P\-Matrix
\item k\-C\-C\-Uniform\-Sampler
\end{DoxyItemize}

And it will bind \char`\"{}k\-C\-C\-Uniform\-Sampler\char`\"{} to 0 

Referenced by C\-C\-Shader\-Cache\-::load\-Default\-Shaders.


\begin{DoxyCode}
{
        uniforms_[  kCCUniformPMatrix] = glGetUniformLocation(program_, 
      kCCUniformPMatrix_s);
        uniforms_[ kCCUniformMVMatrix] = glGetUniformLocation(program_, 
      kCCUniformMVMatrix_s);
        uniforms_[kCCUniformMVPMatrix] = glGetUniformLocation(program_, 
      kCCUniformMVPMatrix_s);
        
        uniforms_[kCCUniformTime] = glGetUniformLocation(program_, 
      kCCUniformTime_s);
        uniforms_[kCCUniformSinTime] = glGetUniformLocation(program_, 
      kCCUniformSinTime_s);
        uniforms_[kCCUniformCosTime] = glGetUniformLocation(program_, 
      kCCUniformCosTime_s);
        
        usesTime_ = (
                uniforms_[kCCUniformTime] != -1 ||
                uniforms_[kCCUniformSinTime] != -1 ||
                uniforms_[kCCUniformCosTime] != -1
        );

        uniforms_[kCCUniformRandom01] = glGetUniformLocation(program_, 
      kCCUniformRandom01_s);
        
        uniforms_[kCCUniformSampler] = glGetUniformLocation(program_, 
      kCCUniformSampler_s);

        [self use];
        
        // Since sample most probably won't change, set it to 0 now.
        [self setUniformLocation:uniforms_[kCCUniformSampler] withI1:0];
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a10ff7a477f3cf4a4085b415f88921e01}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!use@{use}}
\index{use@{use}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{use}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (void) {\bf use} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a10ff7a477f3cf4a4085b415f88921e01}
it will call gl\-Use\-Program() 

Referenced by cc\-Draw\-Cardinal\-Spline(), cc\-Draw\-Circle(), cc\-Draw\-Cubic\-Bezier(), cc\-Draw\-Line(), cc\-Draw\-Point(), cc\-Draw\-Points(), cc\-Draw\-Poly(), cc\-Draw\-Quad\-Bezier(), cc\-Draw\-Solid\-Poly(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Circle(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Polygon(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Segment(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Solid\-Circle(), G\-L\-E\-S\-Debug\-Draw\-::\-Draw\-Solid\-Polygon(), and update\-Uniforms.


\begin{DoxyCode}
{
        ccGLUseProgram(program_);
}
\end{DoxyCode}
\hypertarget{interface_c_c_g_l_program_a9425ba6c62e5b66a82c9b6259643b8a5}{\index{C\-C\-G\-L\-Program@{C\-C\-G\-L\-Program}!vertex\-Shader\-Log@{vertex\-Shader\-Log}}
\index{vertex\-Shader\-Log@{vertex\-Shader\-Log}!CCGLProgram@{C\-C\-G\-L\-Program}}
\subsubsection[{vertex\-Shader\-Log}]{\setlength{\rightskip}{0pt plus 5cm}-\/ (N\-S\-String $\ast$) {\bf vertex\-Shader\-Log} 
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
}}\label{interface_c_c_g_l_program_a9425ba6c62e5b66a82c9b6259643b8a5}
returns the vertex\-Shader error log 
\begin{DoxyCode}
{
        return [self logForOpenGLObject:vertShader_
                                           infoCallback:(GLInfoFunction)&
      glGetShaderiv
                                                        logFunc:(GLLogFunction)
      &glGetShaderInfoLog];
}
\end{DoxyCode}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/\-Bing/\-File/cocos2d/cocos2d-\/iphone/cocos2d-\/iphone-\/2.\-1-\/beta4/cocos2d/C\-C\-G\-L\-Program.\-h\item 
/\-Bing/\-File/cocos2d/cocos2d-\/iphone/cocos2d-\/iphone-\/2.\-1-\/beta4/cocos2d/C\-C\-G\-L\-Program.\-m\end{DoxyCompactItemize}
