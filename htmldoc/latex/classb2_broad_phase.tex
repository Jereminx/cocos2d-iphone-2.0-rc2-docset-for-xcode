\hypertarget{classb2_broad_phase}{\section{b2\-Broad\-Phase Class Reference}
\label{classb2_broad_phase}\index{b2\-Broad\-Phase@{b2\-Broad\-Phase}}
}


{\ttfamily \#include $<$b2\-Broad\-Phase.\-h$>$}

\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \{ {\bfseries e\-\_\-null\-Proxy} =  -\/1
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
int32 \hyperlink{classb2_broad_phase_ae2f7af756bc55ece45221466c5af449c}{Create\-Proxy} (const \hyperlink{structb2_a_a_b_b}{b2\-A\-A\-B\-B} \&aabb, void $\ast$user\-Data)
\item 
\hypertarget{classb2_broad_phase_a84f0fb227dc01a9b9baa55c7b8c68984}{void \hyperlink{classb2_broad_phase_a84f0fb227dc01a9b9baa55c7b8c68984}{Destroy\-Proxy} (int32 proxy\-Id)}\label{classb2_broad_phase_a84f0fb227dc01a9b9baa55c7b8c68984}

\begin{DoxyCompactList}\small\item\em Destroy a proxy. It is up to the client to remove any pairs. \end{DoxyCompactList}\item 
void \hyperlink{classb2_broad_phase_a01dc18a19c2b5d0cc1d9cd8c8554234c}{Move\-Proxy} (int32 proxy\-Id, const \hyperlink{structb2_a_a_b_b}{b2\-A\-A\-B\-B} \&aabb, const \hyperlink{structb2_vec2}{b2\-Vec2} \&displacement)
\item 
\hypertarget{classb2_broad_phase_a67b296431ebbc7b44037f21d645d9166}{void \hyperlink{classb2_broad_phase_a67b296431ebbc7b44037f21d645d9166}{Touch\-Proxy} (int32 proxy\-Id)}\label{classb2_broad_phase_a67b296431ebbc7b44037f21d645d9166}

\begin{DoxyCompactList}\small\item\em Call to trigger a re-\/processing of it's pairs on the next call to Update\-Pairs. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a7b00ac700db52e52248a25397007d4ff}{const \hyperlink{structb2_a_a_b_b}{b2\-A\-A\-B\-B} \& \hyperlink{classb2_broad_phase_a7b00ac700db52e52248a25397007d4ff}{Get\-Fat\-A\-A\-B\-B} (int32 proxy\-Id) const }\label{classb2_broad_phase_a7b00ac700db52e52248a25397007d4ff}

\begin{DoxyCompactList}\small\item\em Get the fat A\-A\-B\-B for a proxy. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a89c099e95237d68577376d8f9a4ed013}{void $\ast$ \hyperlink{classb2_broad_phase_a89c099e95237d68577376d8f9a4ed013}{Get\-User\-Data} (int32 proxy\-Id) const }\label{classb2_broad_phase_a89c099e95237d68577376d8f9a4ed013}

\begin{DoxyCompactList}\small\item\em Get user data from a proxy. Returns N\-U\-L\-L if the id is invalid. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a1785eb29d14997d81bd537f064d22aba}{bool \hyperlink{classb2_broad_phase_a1785eb29d14997d81bd537f064d22aba}{Test\-Overlap} (int32 proxy\-Id\-A, int32 proxy\-Id\-B) const }\label{classb2_broad_phase_a1785eb29d14997d81bd537f064d22aba}

\begin{DoxyCompactList}\small\item\em \hyperlink{class_test}{Test} overlap of fat A\-A\-B\-Bs. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a399fa4f5289a1ec46a65f726f3bac890}{int32 \hyperlink{classb2_broad_phase_a399fa4f5289a1ec46a65f726f3bac890}{Get\-Proxy\-Count} () const }\label{classb2_broad_phase_a399fa4f5289a1ec46a65f726f3bac890}

\begin{DoxyCompactList}\small\item\em Get the number of proxies. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a0a1acd693466b997700242ae00784c20}{{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classb2_broad_phase_a0a1acd693466b997700242ae00784c20}{Update\-Pairs} (T $\ast$callback)}\label{classb2_broad_phase_a0a1acd693466b997700242ae00784c20}

\begin{DoxyCompactList}\small\item\em Update the pairs. This results in pair callbacks. This can only add pairs. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classb2_broad_phase_aea5732362c8bb3959c6b24f967654d93}{Query} (T $\ast$callback, const \hyperlink{structb2_a_a_b_b}{b2\-A\-A\-B\-B} \&aabb) const 
\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classb2_broad_phase_aebcb837120ce45bbb82b4b61db533026}{Ray\-Cast} (T $\ast$callback, const \hyperlink{structb2_ray_cast_input}{b2\-Ray\-Cast\-Input} \&input) const 
\item 
\hypertarget{classb2_broad_phase_aeb9f94f44840c5bd766031d78f63ca08}{int32 \hyperlink{classb2_broad_phase_aeb9f94f44840c5bd766031d78f63ca08}{Get\-Tree\-Height} () const }\label{classb2_broad_phase_aeb9f94f44840c5bd766031d78f63ca08}

\begin{DoxyCompactList}\small\item\em Get the height of the embedded tree. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_a1189e783d39bfd69b314284ce52ea3c3}{int32 \hyperlink{classb2_broad_phase_a1189e783d39bfd69b314284ce52ea3c3}{Get\-Tree\-Balance} () const }\label{classb2_broad_phase_a1189e783d39bfd69b314284ce52ea3c3}

\begin{DoxyCompactList}\small\item\em Get the balance of the embedded tree. \end{DoxyCompactList}\item 
\hypertarget{classb2_broad_phase_abe02c30ca1b3b9c9b84a571a2f8cef92}{float32 \hyperlink{classb2_broad_phase_abe02c30ca1b3b9c9b84a571a2f8cef92}{Get\-Tree\-Quality} () const }\label{classb2_broad_phase_abe02c30ca1b3b9c9b84a571a2f8cef92}

\begin{DoxyCompactList}\small\item\em Get the quality metric of the embedded tree. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classb2_broad_phase_afc450dc71ee33ab0c9e7f1c31d6f7f60}{class {\bfseries b2\-Dynamic\-Tree}}\label{classb2_broad_phase_afc450dc71ee33ab0c9e7f1c31d6f7f60}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
The broad-\/phase is used for computing pairs and performing volume queries and ray casts. This broad-\/phase does not persist pairs. Instead, this reports potentially new pairs. It is up to the client to consume the new pairs and to track subsequent overlap. 

\subsection{Member Function Documentation}
\hypertarget{classb2_broad_phase_ae2f7af756bc55ece45221466c5af449c}{\index{b2\-Broad\-Phase@{b2\-Broad\-Phase}!Create\-Proxy@{Create\-Proxy}}
\index{Create\-Proxy@{Create\-Proxy}!b2BroadPhase@{b2\-Broad\-Phase}}
\subsubsection[{Create\-Proxy}]{\setlength{\rightskip}{0pt plus 5cm}int32 {\bf b2\-Broad\-Phase\-::\-Create\-Proxy} (
\begin{DoxyParamCaption}
\item[{const {\bf b2\-A\-A\-B\-B} \&}]{aabb, }
\item[{void $\ast$}]{user\-Data}
\end{DoxyParamCaption}
)}}\label{classb2_broad_phase_ae2f7af756bc55ece45221466c5af449c}
Create a proxy with an initial A\-A\-B\-B. Pairs are not reported until Update\-Pairs is called. 
\begin{DoxyCode}
{
        int32 proxyId = m_tree.CreateProxy(aabb, userData);
        ++m_proxyCount;
        BufferMove(proxyId);
        return proxyId;
}
\end{DoxyCode}
\hypertarget{classb2_broad_phase_a01dc18a19c2b5d0cc1d9cd8c8554234c}{\index{b2\-Broad\-Phase@{b2\-Broad\-Phase}!Move\-Proxy@{Move\-Proxy}}
\index{Move\-Proxy@{Move\-Proxy}!b2BroadPhase@{b2\-Broad\-Phase}}
\subsubsection[{Move\-Proxy}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf b2\-Broad\-Phase\-::\-Move\-Proxy} (
\begin{DoxyParamCaption}
\item[{int32}]{proxy\-Id, }
\item[{const {\bf b2\-A\-A\-B\-B} \&}]{aabb, }
\item[{const {\bf b2\-Vec2} \&}]{displacement}
\end{DoxyParamCaption}
)}}\label{classb2_broad_phase_a01dc18a19c2b5d0cc1d9cd8c8554234c}
Call Move\-Proxy as many times as you like, then when you are done call Update\-Pairs to finalized the proxy pairs (for your time step). 
\begin{DoxyCode}
{
        bool buffer = m_tree.MoveProxy(proxyId, aabb, displacement);
        if (buffer)
        {
                BufferMove(proxyId);
        }
}
\end{DoxyCode}
\hypertarget{classb2_broad_phase_aea5732362c8bb3959c6b24f967654d93}{\index{b2\-Broad\-Phase@{b2\-Broad\-Phase}!Query@{Query}}
\index{Query@{Query}!b2BroadPhase@{b2\-Broad\-Phase}}
\subsubsection[{Query}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void {\bf b2\-Broad\-Phase\-::\-Query} (
\begin{DoxyParamCaption}
\item[{T $\ast$}]{callback, }
\item[{const {\bf b2\-A\-A\-B\-B} \&}]{aabb}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classb2_broad_phase_aea5732362c8bb3959c6b24f967654d93}
Query an A\-A\-B\-B for overlapping proxies. The callback class is called for each proxy that overlaps the supplied A\-A\-B\-B. 

Referenced by b2\-World\-::\-Query\-A\-A\-B\-B().


\begin{DoxyCode}
{
        m_tree.Query(callback, aabb);
}
\end{DoxyCode}
\hypertarget{classb2_broad_phase_aebcb837120ce45bbb82b4b61db533026}{\index{b2\-Broad\-Phase@{b2\-Broad\-Phase}!Ray\-Cast@{Ray\-Cast}}
\index{Ray\-Cast@{Ray\-Cast}!b2BroadPhase@{b2\-Broad\-Phase}}
\subsubsection[{Ray\-Cast}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void {\bf b2\-Broad\-Phase\-::\-Ray\-Cast} (
\begin{DoxyParamCaption}
\item[{T $\ast$}]{callback, }
\item[{const {\bf b2\-Ray\-Cast\-Input} \&}]{input}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{classb2_broad_phase_aebcb837120ce45bbb82b4b61db533026}
Ray-\/cast against the proxies in the tree. This relies on the callback to perform a exact ray-\/cast in the case were the proxy contains a shape. The callback also performs the any collision filtering. This has performance roughly equal to k $\ast$ log(n), where k is the number of collisions and n is the number of proxies in the tree. 
\begin{DoxyParams}{Parameters}
{\em input} & the ray-\/cast input data. The ray extends from p1 to p1 + max\-Fraction $\ast$ (p2 -\/ p1). \\
\hline
{\em callback} & a callback class that is called for each proxy that is hit by the ray. \\
\hline
\end{DoxyParams}


Referenced by b2\-World\-::\-Ray\-Cast().


\begin{DoxyCode}
{
        m_tree.RayCast(callback, input);
}
\end{DoxyCode}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/\-Bing/\-File/cocos2d/cocos2d-\/iphone/cocos2d-\/iphone-\/2.\-1-\/beta4/external/\-Box2d/\-Box2\-D/\-Collision/b2\-Broad\-Phase.\-h\item 
/\-Bing/\-File/cocos2d/cocos2d-\/iphone/cocos2d-\/iphone-\/2.\-1-\/beta4/external/\-Box2d/\-Box2\-D/\-Collision/b2\-Broad\-Phase.\-cpp\end{DoxyCompactItemize}
