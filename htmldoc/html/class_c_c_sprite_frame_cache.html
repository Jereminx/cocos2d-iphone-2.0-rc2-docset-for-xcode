<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cocos2d-iphone-2.1-beta4: CCSpriteFrameCache Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos2d-iphone-2.1-beta4
   &#160;<span id="projectnumber">2.1-beta4</span>
   </div>
   <div id="projectbrief">zhxubing@gmail.com</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_c_c_sprite_frame_cache.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">CCSpriteFrameCache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;<a class="el" href="_c_c_sprite_frame_cache_8h_source.html">CCSpriteFrameCache.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CCSpriteFrameCache:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_c_c_sprite_frame_cache.png" usemap="#CCSpriteFrameCache_map" alt=""/>
  <map id="CCSpriteFrameCache_map" name="CCSpriteFrameCache_map">
<area href="class_n_s_object.html" alt="NSObject" shape="rect" coords="0,0,136,24"/>
</map>
 </div></div>

<p><a href="class_c_c_sprite_frame_cache-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a98ba94307a913f9eafad3ba44b0cb751"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#a98ba94307a913f9eafad3ba44b0cb751">addSpriteFramesWithFile:</a></td></tr>
<tr class="memitem:af99ecfe844cf9bb42ab498a5b3894ad3"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#af99ecfe844cf9bb42ab498a5b3894ad3">addSpriteFramesWithFile:textureFilename:</a></td></tr>
<tr class="memitem:ac628abacc843faa02d8ea6e03f5c365a"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#ac628abacc843faa02d8ea6e03f5c365a">addSpriteFramesWithFile:texture:</a></td></tr>
<tr class="memitem:a9badf2589956d9659c640946b3cdd547"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#a9badf2589956d9659c640946b3cdd547">addSpriteFrame:name:</a></td></tr>
<tr class="memitem:a9b9719273023e0d73078d7ed779ea35a"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#a9b9719273023e0d73078d7ed779ea35a">removeSpriteFrames</a></td></tr>
<tr class="memitem:a849066146f123d21dce0ce5378d03516"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#a849066146f123d21dce0ce5378d03516">removeUnusedSpriteFrames</a></td></tr>
<tr class="memitem:a0d38ec48a0084cc32ca90edd5475ae15"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#a0d38ec48a0084cc32ca90edd5475ae15">removeSpriteFrameByName:</a></td></tr>
<tr class="memitem:aa3a61d8b6e9936f9e5a3bf8f4d264e10"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#aa3a61d8b6e9936f9e5a3bf8f4d264e10">removeSpriteFramesFromFile:</a></td></tr>
<tr class="memitem:ad2bb95d9e83bbf732c9eba2514bc24cd"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#ad2bb95d9e83bbf732c9eba2514bc24cd">removeSpriteFramesFromTexture:</a></td></tr>
<tr class="memitem:af9d4b9ed99c9193a9a7e3a3516ffc796"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_c_c_sprite_frame.html">CCSpriteFrame</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_c_sprite_frame_cache.html#af9d4b9ed99c9193a9a7e3a3516ffc796">spriteFrameByName:</a></td></tr>
<tr class="memitem:a8b131a12f1f05ae62d24a7cad0d35e4f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8b131a12f1f05ae62d24a7cad0d35e4f"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>addSpriteFramesWithDictionary:textureFile:</b></td></tr>
<tr class="memitem:a6ab886afb1dc60e6aaf483bc258c9ae6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ab886afb1dc60e6aaf483bc258c9ae6"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>addSpriteFramesWithFile:textureFile:</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2212ce69087afeea57ff2d677e67fdc6"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="class_c_c_sprite_frame_cache.html">CCSpriteFrameCache</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="class_c_c_sprite_frame_cache.html#a2212ce69087afeea57ff2d677e67fdc6">sharedSpriteFrameCache</a></td></tr>
<tr class="memitem:ae31b11409c7483fa7f3e7e80f2ae8d03"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="class_c_c_sprite_frame_cache.html#ae31b11409c7483fa7f3e7e80f2ae8d03">purgeSharedSpriteFrameCache</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a63895824fd418189b8fcc0edad5226a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63895824fd418189b8fcc0edad5226a7"></a>
NSMutableDictionary *&#160;</td><td class="memItemRight" valign="bottom"><b>spriteFrames_</b></td></tr>
<tr class="memitem:a8612ebfd3afe3db670c1926ab42357ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8612ebfd3afe3db670c1926ab42357ed"></a>
NSMutableDictionary *&#160;</td><td class="memItemRight" valign="bottom"><b>spriteFramesAliases_</b></td></tr>
<tr class="memitem:a185a13190afd34d1e2db08fa579cb2d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a185a13190afd34d1e2db08fa579cb2d4"></a>
NSMutableSet *&#160;</td><td class="memItemRight" valign="bottom"><b>loadedFilenames_</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Singleton that handles the loading of the sprite frames. It saves in a cache the sprite frames. </p>
<dl class="section since"><dt>Since:</dt><dd>v0.9 </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9badf2589956d9659c640946b3cdd547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) addSpriteFrame: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_sprite_frame.html">CCSpriteFrame</a>*)&#160;</td>
          <td class="paramname"><em>frame</em></td>
        </tr>
        <tr>
          <td class="paramkey">name:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>frameName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds an sprite frame with a given name. If the name already exists, then the contents of the old name will be replaced with the new one. </p>
<div class="fragment"><pre class="fragment">                      :(<a class="code" href="interface_c_c_sprite_frame.html">CCSpriteFrame</a>*)frame name:(NSString*)frameName
{
        [spriteFrames_ setObject:frame forKey:frameName];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98ba94307a913f9eafad3ba44b0cb751"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a98ba94307a913f9eafad3ba44b0cb751">addSpriteFramesWithFile:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>plist</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds multiple Sprite Frames from a plist file. A texture will be loaded automatically. The texture name will composed by replacing the .plist suffix with .png . If you want to use another texture, you should use the addSpriteFramesWithFile:texture method. </p>

<p>Referenced by <a class="el" href="interface_c_c_animation_cache.html#a1005b4ef347685bf5860231331c09f84">CCAnimationCache::addAnimationsWithDictionary:</a>.</p>
<div class="fragment"><pre class="fragment">                               :(NSString*)plist
{
        NSAssert(plist, <span class="stringliteral">@&quot;plist filename should not be nil&quot;</span>);
        
        <span class="keywordflow">if</span>( ! [loadedFilenames_ member:plist] ) {

                NSString *path = [[<a class="code" href="class_c_c_file_utils.html">CCFileUtils</a> <a class="code" href="class_c_c_file_utils.html#a22778340e63b61d0a5e1977b741b256b">sharedFileUtils</a>] <a class="code" href="class_c_c_file_utils.html#a270b676e357a8440376ef0883992c43c">fullPathFromRelativePath</a>:plist];
                NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

                NSString *texturePath = nil;
                NSDictionary *metadataDict = [dict objectForKey:@&quot;metadata&quot;];
                <span class="keywordflow">if</span>( metadataDict )
                        <span class="comment">// try to read  texture file name from meta data</span>
                        texturePath = [metadataDict objectForKey:@&quot;textureFileName&quot;];


                <span class="keywordflow">if</span>( texturePath )
                {
                        <span class="comment">// build texture path relative to plist file</span>
                        NSString *textureBase = [plist stringByDeletingLastPathComponent];
                        texturePath = [textureBase stringByAppendingPathComponent:texturePath];
                } <span class="keywordflow">else</span> {
                        <span class="comment">// build texture path by replacing file extension</span>
                        texturePath = [plist stringByDeletingPathExtension];
                        texturePath = [texturePath stringByAppendingPathExtension:@&quot;png&quot;];

                        CCLOG(<span class="stringliteral">@&quot;cocos2d: CCSpriteFrameCache: Trying to use file &#39;%@&#39; as texture&quot;</span>, texturePath);
                }

                [<span class="keyword">self</span> addSpriteFramesWithDictionary:dict textureFilename:texturePath];
                
                [loadedFilenames_ addObject:plist];
        }
        <span class="keywordflow">else</span> 
                CCLOGINFO(<span class="stringliteral">@&quot;cocos2d: CCSpriteFrameCache: file already loaded: %@&quot;</span>, plist);

}
</pre></div>
</div>
</div>
<a class="anchor" id="ac628abacc843faa02d8ea6e03f5c365a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a98ba94307a913f9eafad3ba44b0cb751">addSpriteFramesWithFile:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>plist</em></td>
        </tr>
        <tr>
          <td class="paramkey">texture:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_c_texture2_d.html">CCTexture2D</a>*)&#160;</td>
          <td class="paramname"><em>texture</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds multiple Sprite Frames from a plist file. The texture will be associated with the created sprite frames. </p>
<div class="fragment"><pre class="fragment">                               :(NSString*)plist texture:(<a class="code" href="class_c_c_texture2_d.html">CCTexture2D</a>*)texture
{
        <span class="keywordflow">return</span> [<span class="keyword">self</span> addSpriteFramesWithFile:plist textureReference:texture];
}
</pre></div>
</div>
</div>
<a class="anchor" id="af99ecfe844cf9bb42ab498a5b3894ad3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a98ba94307a913f9eafad3ba44b0cb751">addSpriteFramesWithFile:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>plist</em></td>
        </tr>
        <tr>
          <td class="paramkey">textureFilename:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds multiple Sprite Frames from a plist file. The texture filename will be associated with the created sprite frames. </p>
<div class="fragment"><pre class="fragment">                               :(NSString*)plist textureFilename:(NSString*)textureFilename
{
        <span class="keywordflow">return</span> [<span class="keyword">self</span> addSpriteFramesWithFile:plist textureReference:textureFilename];
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae31b11409c7483fa7f3e7e80f2ae8d03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) <a class="el" href="class_c_c_sprite_frame_cache.html#ae31b11409c7483fa7f3e7e80f2ae8d03">purgeSharedSpriteFrameCache</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Purges the cache. It releases all the Sprite Frames and the retained instance. </p>

<p>Referenced by <a class="el" href="class_c_c_director.html#ab9239db827bd235926d332ac6b703a5f">CCDirector::end</a>.</p>
<div class="fragment"><pre class="fragment">{
        [sharedSpriteFrameCache_ release];
        sharedSpriteFrameCache_ = nil;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d38ec48a0084cc32ca90edd5475ae15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a0d38ec48a0084cc32ca90edd5475ae15">removeSpriteFrameByName:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>name</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes an sprite frame from the sprite frame cache. </p>
<div class="fragment"><pre class="fragment">                               :(NSString*)name
{
        <span class="comment">// explicit nil handling</span>
        <span class="keywordflow">if</span>( ! name )
                <span class="keywordflow">return</span>;

        <span class="comment">// Is this an alias ?</span>
        NSString *key = [spriteFramesAliases_ objectForKey:name];

        <span class="keywordflow">if</span>( key ) {
                [spriteFrames_ removeObjectForKey:key];
                [spriteFramesAliases_ removeObjectForKey:name];

        } <span class="keywordflow">else</span>
                [spriteFrames_ removeObjectForKey:name];
        
        <span class="comment">// XXX. Since we don&#39;t know the .plist file that originated the frame, we must remove all .plist from the cache</span>
        [loadedFilenames_ removeAllObjects];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b9719273023e0d73078d7ed779ea35a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a9b9719273023e0d73078d7ed779ea35a">removeSpriteFrames</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Purges the dictionary of loaded sprite frames. Call this method if you receive the "Memory Warning". In the short term: it will free some resources preventing your app from being killed. In the medium term: it will allocate more resources. In the long term: it will be the same. </p>
<div class="fragment"><pre class="fragment">{
        [spriteFrames_ removeAllObjects];
        [spriteFramesAliases_ removeAllObjects];
        [loadedFilenames_ removeAllObjects];
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa3a61d8b6e9936f9e5a3bf8f4d264e10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#aa3a61d8b6e9936f9e5a3bf8f4d264e10">removeSpriteFramesFromFile:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>plist</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes multiple Sprite Frames from a plist file. Sprite Frames stored in this file will be removed. It is convenient to call this method when a specific texture needs to be removed. </p>
<dl class="section since"><dt>Since:</dt><dd>v0.99.5 </dd></dl>
<div class="fragment"><pre class="fragment">                                   :(NSString*) plist
{
        NSString *path = [[<a class="code" href="class_c_c_file_utils.html">CCFileUtils</a> <a class="code" href="class_c_c_file_utils.html#a22778340e63b61d0a5e1977b741b256b">sharedFileUtils</a>] <a class="code" href="class_c_c_file_utils.html#a270b676e357a8440376ef0883992c43c">fullPathFromRelativePath</a>:plist];
        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

        [<span class="keyword">self</span> removeSpriteFramesFromDictionary:dict];
        
        <span class="comment">// remove it from the cache</span>
        <span class="keywordtype">id</span> ret = [loadedFilenames_ member:plist];
        <span class="keywordflow">if</span>( ret )
                [loadedFilenames_ removeObject:ret];
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad2bb95d9e83bbf732c9eba2514bc24cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#ad2bb95d9e83bbf732c9eba2514bc24cd">removeSpriteFramesFromTexture:</a> </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_c_texture2_d.html">CCTexture2D</a>*)&#160;</td>
          <td class="paramname"><em>texture</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes all Sprite Frames associated with the specified textures. It is convenient to call this method when a specific texture needs to be removed. </p>
<dl class="section since"><dt>Since:</dt><dd>v0.995. </dd></dl>
<div class="fragment"><pre class="fragment">                                      :(<a class="code" href="class_c_c_texture2_d.html">CCTexture2D</a>*) texture
{
        NSMutableArray *keysToRemove=[NSMutableArray array];

        <span class="keywordflow">for</span> (NSString *spriteFrameKey in spriteFrames_)
        {
                <span class="keywordflow">if</span> ([[spriteFrames_ valueForKey:spriteFrameKey] texture] == texture)
                        [keysToRemove addObject:spriteFrameKey];

        }
        [spriteFrames_ removeObjectsForKeys:keysToRemove];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a849066146f123d21dce0ce5378d03516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_sprite_frame_cache.html#a849066146f123d21dce0ce5378d03516">removeUnusedSpriteFrames</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes unused sprite frames. Sprite Frames that have a retain count of 1 will be deleted. It is convenient to call this method after when starting a new Scene. </p>
<div class="fragment"><pre class="fragment">{
        BOOL removed_ = NO;
        NSArray *keys = [spriteFrames_ allKeys];
        <span class="keywordflow">for</span>( <span class="keywordtype">id</span> key in keys ) {
                <span class="keywordtype">id</span> value = [spriteFrames_ objectForKey:key];
                <span class="keywordflow">if</span>( [value retainCount] == 1 ) {
                        CCLOG(<span class="stringliteral">@&quot;cocos2d: CCSpriteFrameCache: removing unused frame: %@&quot;</span>, key);
                        [spriteFrames_ removeObjectForKey:key];
                        removed_ = YES;
                }
        }
        
        <span class="comment">// XXX. Since we don&#39;t know the .plist file that originated the frame, we must remove all .plist from the cache</span>
        <span class="keywordflow">if</span>( removed_ )
                [loadedFilenames_ removeAllObjects];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2212ce69087afeea57ff2d677e67fdc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="class_c_c_sprite_frame_cache.html">CCSpriteFrameCache</a> *) <a class="el" href="class_c_c_sprite_frame_cache.html#a2212ce69087afeea57ff2d677e67fdc6">sharedSpriteFrameCache</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retruns ths shared instance of the Sprite Frame cache </p>

<p>Referenced by <a class="el" href="interface_c_c_animation_cache.html#a1005b4ef347685bf5860231331c09f84">CCAnimationCache::addAnimationsWithDictionary:</a>, <a class="el" href="class_c_c_sprite.html#a331881a2a3bda9eb5ac8e71419c799ca">CCSprite::initWithSpriteFrameName:</a>, and <a class="el" href="class_c_c_sprite.html#a91bec3d54da797f9b62c9ea39be640d3">CCSprite::spriteWithSpriteFrameName:</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span> (!sharedSpriteFrameCache_)
                sharedSpriteFrameCache_ = [[<a class="code" href="class_c_c_sprite_frame_cache.html">CCSpriteFrameCache</a> alloc] init];

        <span class="keywordflow">return</span> sharedSpriteFrameCache_;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9d4b9ed99c9193a9a7e3a3516ffc796"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c_sprite_frame.html">CCSpriteFrame</a> *) <a class="el" href="class_c_c_sprite_frame_cache.html#af9d4b9ed99c9193a9a7e3a3516ffc796">spriteFrameByName:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>name</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an Sprite Frame that was previously added. If the name is not found it will return nil. You should retain the returned copy if you are going to use it. </p>

<p>Referenced by <a class="el" href="class_c_c_sprite.html#a331881a2a3bda9eb5ac8e71419c799ca">CCSprite::initWithSpriteFrameName:</a>, and <a class="el" href="class_c_c_sprite.html#a91bec3d54da797f9b62c9ea39be640d3">CCSprite::spriteWithSpriteFrameName:</a>.</p>
<div class="fragment"><pre class="fragment">                                   :(NSString*)name
{
        <a class="code" href="interface_c_c_sprite_frame.html">CCSpriteFrame</a> *frame = [spriteFrames_ objectForKey:name];
        <span class="keywordflow">if</span>( ! frame ) {
                <span class="comment">// try alias dictionary</span>
                NSString *key = [spriteFramesAliases_ objectForKey:name];
                frame = [spriteFrames_ objectForKey:key];

                <span class="keywordflow">if</span>( ! frame )
                        CCLOG(<span class="stringliteral">@&quot;cocos2d: CCSpriteFrameCache: Frame &#39;%@&#39; not found&quot;</span>, name);
        }

        <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/cocos2d/ccDeprecated.m</li>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/cocos2d/<a class="el" href="_c_c_sprite_frame_cache_8h_source.html">CCSpriteFrameCache.h</a></li>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/cocos2d/CCSpriteFrameCache.m</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_c_c_sprite_frame_cache.html">CCSpriteFrameCache</a>      </li>

    <li class="footer">Generated on Wed Jan 30 2013 23:41:09 for cocos2d-iphone-2.1-beta4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
