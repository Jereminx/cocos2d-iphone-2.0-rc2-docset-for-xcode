<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cocos2d-iphone-2.1-beta4: CDAudioManager Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos2d-iphone-2.1-beta4
   &#160;<span id="projectnumber">2.1-beta4</span>
   </div>
   <div id="projectbrief">zhxubing@gmail.com</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interface_c_d_audio_manager.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CDAudioManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;<a class="el" href="_c_d_audio_manager_8h_source.html">CDAudioManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CDAudioManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_c_d_audio_manager.png" usemap="#CDAudioManager_map" alt=""/>
  <map id="CDAudioManager_map" name="CDAudioManager_map">
<area href="class_n_s_object.html" alt="NSObject" shape="rect" coords="0,0,196,24"/>
<area href="protocol_c_d_long_audio_source_delegate-p.html" alt="&lt;CDLongAudioSourceDelegate&gt;" shape="rect" coords="206,0,402,24"/>
<area href="protocol_c_d_audio_interrupt_protocol-p.html" alt="&lt;CDAudioInterruptProtocol&gt;" shape="rect" coords="412,0,608,24"/>
</map>
 </div></div>

<p><a href="class_c_d_audio_manager-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2d8ef3daed8297ee37cd14b67687407"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#ae2d8ef3daed8297ee37cd14b67687407">init:</a></td></tr>
<tr class="memitem:aeeaf362faad4417ac15d22e0862c1641"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeeaf362faad4417ac15d22e0862c1641"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>audioSessionInterrupted</b></td></tr>
<tr class="memitem:a844dd2990cbadb04e35364abed23f690"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a844dd2990cbadb04e35364abed23f690"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>audioSessionResumed</b></td></tr>
<tr class="memitem:aa798467094d7ba507839edbeb54b8b56"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa798467094d7ba507839edbeb54b8b56"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>setResignBehavior:autoHandle:</b></td></tr>
<tr class="memitem:a5a4df8bc83cbc6e6723196d3d4ec4974"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a5a4df8bc83cbc6e6723196d3d4ec4974">isDeviceMuted</a></td></tr>
<tr class="memitem:ab664b34e99f6f3e2158f2df910cf3a95"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#ab664b34e99f6f3e2158f2df910cf3a95">isOtherAudioPlaying</a></td></tr>
<tr class="memitem:a72fd182d62cc75dfa3701da4a5d97346"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a72fd182d62cc75dfa3701da4a5d97346">setMode:</a></td></tr>
<tr class="memitem:a5265cc9a823688a547aa60e8995ba423"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a5265cc9a823688a547aa60e8995ba423">applicationWillResignActive</a></td></tr>
<tr class="memitem:aa572c7a296c0b2de3564f8da368835ef"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#aa572c7a296c0b2de3564f8da368835ef">applicationDidBecomeActive</a></td></tr>
<tr class="memitem:af1115f9197d62586dd0d16b440570c01"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#af1115f9197d62586dd0d16b440570c01">audioSourceLoad:channel:</a></td></tr>
<tr class="memitem:a07c2429b4ae8340c5aefe21c381f102f"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a07c2429b4ae8340c5aefe21c381f102f">audioSourceForChannel:</a></td></tr>
<tr class="memitem:a0d7307effb3adbf755b1de16d82e7c45"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a0d7307effb3adbf755b1de16d82e7c45">playBackgroundMusic:loop:</a></td></tr>
<tr class="memitem:a613d13a6227a90dd5a073dbde1ac447b"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a613d13a6227a90dd5a073dbde1ac447b">preloadBackgroundMusic:</a></td></tr>
<tr class="memitem:a2403abdc32f144a0d57d915db42d35a6"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a2403abdc32f144a0d57d915db42d35a6">stopBackgroundMusic</a></td></tr>
<tr class="memitem:acbd505494ec2f01e484dfca635b208b8"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#acbd505494ec2f01e484dfca635b208b8">pauseBackgroundMusic</a></td></tr>
<tr class="memitem:a98e99a2b9eabcf89ad7419f6f809c65a"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a98e99a2b9eabcf89ad7419f6f809c65a">rewindBackgroundMusic</a></td></tr>
<tr class="memitem:a9bcc620677df7b828dd69c951b445062"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a9bcc620677df7b828dd69c951b445062">resumeBackgroundMusic</a></td></tr>
<tr class="memitem:a3b519950dee5dd8e79c8bbbf3c0f7e26"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_audio_manager.html#a3b519950dee5dd8e79c8bbbf3c0f7e26">isBackgroundMusicPlaying</a></td></tr>
<tr class="memitem:a6c3d719386b69c1a5b2d44a83ce4da55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c3d719386b69c1a5b2d44a83ce4da55"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>setBackgroundMusicCompletionListener:selector:</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a757b69bd4a902166b3ffa81ea85ba6e8"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_c_d_audio_manager.html">CDAudioManager</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a></td></tr>
<tr class="memitem:a836401e9feed55d2276e880e5aca13fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a836401e9feed55d2276e880e5aca13fa"></a>
(tAudioManagerState)&#160;</td><td class="memItemRight" valign="bottom">+ <b>sharedManagerState</b></td></tr>
<tr class="memitem:a4565c81bdaefd40cad943440c7a438ab"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_d_audio_manager.html#a4565c81bdaefd40cad943440c7a438ab">configure:</a></td></tr>
<tr class="memitem:a208d173cd07d3ace248aff4bb16839b9"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_d_audio_manager.html#a208d173cd07d3ace248aff4bb16839b9">initAsynchronously:</a></td></tr>
<tr class="memitem:a0d1e25778a1823456c3d65219a7d0562"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_d_audio_manager.html#a0d1e25778a1823456c3d65219a7d0562">end</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a617ca716e96fdd1e8d481982f9df7df2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a617ca716e96fdd1e8d481982f9df7df2"></a>
NSMutableArray *&#160;</td><td class="memItemRight" valign="bottom"><b>audioSourceChannels</b></td></tr>
<tr class="memitem:a21709238bb6f0c125867e761937dd2fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21709238bb6f0c125867e761937dd2fb"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>_audioSessionCategory</b></td></tr>
<tr class="memitem:a6b102ac1022cab5d35d5e486cd527fc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b102ac1022cab5d35d5e486cd527fc6"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_audioWasPlayingAtStartup</b></td></tr>
<tr class="memitem:a1ecb484491427443f47cf1d810d20fd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ecb484491427443f47cf1d810d20fd4"></a>
tAudioManagerMode&#160;</td><td class="memItemRight" valign="bottom"><b>_mode</b></td></tr>
<tr class="memitem:a9c9bd976a757b6b4d8851ec6dd03be6e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c9bd976a757b6b4d8851ec6dd03be6e"></a>
SEL&#160;</td><td class="memItemRight" valign="bottom"><b>backgroundMusicCompletionSelector</b></td></tr>
<tr class="memitem:a96ab8a0fa9e3480356ad4a6173bc3d4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96ab8a0fa9e3480356ad4a6173bc3d4c"></a>
id&#160;</td><td class="memItemRight" valign="bottom"><b>backgroundMusicCompletionListener</b></td></tr>
<tr class="memitem:a67d4323ad0b7fb59f96375b39c0f3480"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a67d4323ad0b7fb59f96375b39c0f3480"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_mute</b></td></tr>
<tr class="memitem:a9f6929916f5ba0807262d100045ac512"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f6929916f5ba0807262d100045ac512"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_resigned</b></td></tr>
<tr class="memitem:a69aa8f86be0608f599fead7368fb8133"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69aa8f86be0608f599fead7368fb8133"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_interrupted</b></td></tr>
<tr class="memitem:a01b2f1870ef239d99027e67833d24283"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01b2f1870ef239d99027e67833d24283"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_audioSessionActive</b></td></tr>
<tr class="memitem:a91ce224485b38f8cbdd32443b73fa72d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a91ce224485b38f8cbdd32443b73fa72d"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>enabled_</b></td></tr>
<tr class="memitem:aca6d7170a7ac7e6c0b109d3805fc2cb3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca6d7170a7ac7e6c0b109d3805fc2cb3"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_isObservingAppEvents</b></td></tr>
<tr class="memitem:ad993da9d1c8f07f50ff6e9bc5481f774"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad993da9d1c8f07f50ff6e9bc5481f774"></a>
tAudioManagerResignBehavior&#160;</td><td class="memItemRight" valign="bottom"><b>_resignBehavior</b></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a803ed647e9c1e174a5c03ded3b76dd63"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a803ed647e9c1e174a5c03ded3b76dd63"></a>
<a class="el" href="interface_c_d_sound_engine.html">CDSoundEngine</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>soundEngine</b></td></tr>
<tr class="memitem:a533f9e39b345dfebf5708f3411cd5484"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a533f9e39b345dfebf5708f3411cd5484"></a>
<a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>backgroundMusic</b></td></tr>
<tr class="memitem:aca1dba6de45c7939fa8cec46d2500ece"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca1dba6de45c7939fa8cec46d2500ece"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>willPlayBackgroundMusic</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_c_d_audio_manager.html">CDAudioManager</a> manages audio requirements for a game. It provides access to a <a class="el" href="interface_c_d_sound_engine.html">CDSoundEngine</a> object for playing sound effects. It provides access to two <a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> object (left and right channel) for playing long duration audio such as background music and narration tracks. Additionally it manages the audio session to take care of things like audio session interruption and interacting with the audio of other apps that are running on the device.</p>
<p>Requirements:</p>
<ul>
<li>Firmware: OS 2.2 or greater</li>
<li>Files: <a class="el" href="interface_c_d_audio_manager.html">CDAudioManager</a>.*, CocosDenshion.*</li>
<li>Frameworks: OpenAL, AudioToolbox, AVFoundation <dl class="section since"><dt>Since:</dt><dd>v0.8 </dd></dl>
</li>
</ul>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa572c7a296c0b2de3564f8da368835ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#aa572c7a296c0b2de3564f8da368835ef">applicationDidBecomeActive</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call if you want to use built in resign behavior but need to do some additional audio processing on become active. </p>
<div class="fragment"><pre class="fragment">                                    {

        <span class="keywordflow">if</span> (self-&gt;_resigned) {
                _resigned = NO;
                <span class="comment">//Reset the mode incase something changed with audio while we were inactive</span>
                [<span class="keyword">self</span> setMode:_mode];
                <span class="keywordflow">switch</span> (_resignBehavior) {

                        <span class="keywordflow">case</span> kAMRBStopPlay:

                                <span class="comment">//Music had been stopped but stop maintains current time</span>
                                <span class="comment">//so playing again will continue from where music was before resign active.</span>
                                <span class="comment">//We check if music can be played because while we were inactive the user might have</span>
                                <span class="comment">//done something that should force music to not play such as starting a track in the iPod</span>
                                <span class="keywordflow">if</span> (<span class="keyword">self</span>.willPlayBackgroundMusic) {
                                        <span class="keywordflow">for</span>( <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *audioSource in audioSourceChannels) {
                                                <span class="keywordflow">if</span> (audioSource-&gt;systemPaused) {
                                                        [audioSource resume];
                                                        audioSource-&gt;systemPaused = NO;
                                                }
                                        }
                                }
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">default</span>:
                                <span class="keywordflow">break</span>;

                }
                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - audio manager handled become active&quot;</span>);
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5265cc9a823688a547aa60e8995ba423"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a5265cc9a823688a547aa60e8995ba423">applicationWillResignActive</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call if you want to use built in resign behavior but need to do some additional audio processing on resign active. </p>
<div class="fragment"><pre class="fragment">                                     {
        <span class="keyword">self</span>-&gt;_resigned = YES;

        <span class="comment">//Set the audio sesssion to one that allows sharing so that other audio won&#39;t be clobbered on resume</span>
        [<span class="keyword">self</span> audioSessionSetCategory:AVAudioSessionCategoryAmbient];

        <span class="keywordflow">switch</span> (_resignBehavior) {

                <span class="keywordflow">case</span> kAMRBStopPlay:

                        <span class="keywordflow">for</span>( <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *audioSource in audioSourceChannels) {
                                <span class="keywordflow">if</span> (audioSource.isPlaying) {
                                        audioSource-&gt;systemPaused = YES;
                                        audioSource-&gt;systemPauseLocation = audioSource.audioSourcePlayer.currentTime;
                                        [audioSource stop];
                                } <span class="keywordflow">else</span> {
                                        <span class="comment">//Music is either paused or stopped, if it is paused it will be restarted</span>
                                        <span class="comment">//by OS so we will stop it.</span>
                                        audioSource-&gt;systemPaused = NO;
                                        [audioSource stop];
                                }
                        }
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> kAMRBStop:
                        <span class="comment">//Stop music regardless of whether it is playing or not because if it was paused</span>
                        <span class="comment">//then the OS would resume it</span>
                        <span class="keywordflow">for</span>( <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *audioSource in audioSourceChannels) {
                                [audioSource stop];
                        }

                <span class="keywordflow">default</span>:
                        <span class="keywordflow">break</span>;

        }
        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - handled resign active&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07c2429b4ae8340c5aefe21c381f102f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *) <a class="el" href="interface_c_d_audio_manager.html#a07c2429b4ae8340c5aefe21c381f102f">audioSourceForChannel:</a> </td>
          <td></td>
          <td class="paramtype">(tAudioSourceChannel)&#160;</td>
          <td class="paramname"><em>channel</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the audio source for the specified channel </p>

<p>Referenced by <a class="el" href="interface_c_d_audio_manager.html#af1115f9197d62586dd0d16b440570c01">audioSourceLoad:channel:</a>, <a class="el" href="interface_c_d_audio_manager.html#ae2d8ef3daed8297ee37cd14b67687407">init:</a>, and <a class="el" href="interface_the_audio_code.html#acd74afe261a0eb9b4ba4f618ea5a6aca">TheAudioCode::testEight:</a>.</p>
<div class="fragment"><pre class="fragment">                                           :(tAudioSourceChannel) channel
{
        <span class="keywordflow">return</span> (<a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a>*)[audioSourceChannels objectAtIndex:channel];
}
</pre></div>
</div>
</div>
<a class="anchor" id="af1115f9197d62586dd0d16b440570c01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *) audioSourceLoad: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>filePath</em></td>
        </tr>
        <tr>
          <td class="paramkey">channel:</td>
          <td></td>
          <td class="paramtype">(tAudioSourceChannel)&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the data from the specified file path to the channel's audio source </p>
<div class="fragment"><pre class="fragment">                                     :(NSString*) filePath channel:(tAudioSourceChannel) channel
{
        <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *audioSource = [<span class="keyword">self</span> audioSourceForChannel:channel];
        <span class="keywordflow">if</span> (audioSource) {
                [audioSource <a class="code" href="interface_c_d_long_audio_source.html#a50cff2f77f96cf9a2655d5e18af9f225">load</a>:filePath];
        }
        <span class="keywordflow">return</span> audioSource;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4565c81bdaefd40cad943440c7a438ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) <a class="el" href="interface_c_d_audio_manager.html#a4565c81bdaefd40cad943440c7a438ab">configure:</a> </td>
          <td></td>
          <td class="paramtype">(tAudioManagerMode)&#160;</td>
          <td class="paramname"><em>mode</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Configures the shared singleton with a mode </p>

<p>Referenced by <a class="el" href="interface_c_d_audio_manager.html#a208d173cd07d3ace248aff4bb16839b9">initAsynchronously:</a>.</p>
<div class="fragment"><pre class="fragment">                  : (tAudioManagerMode) mode {
        configuredMode = mode;
        configured = TRUE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d1e25778a1823456c3d65219a7d0562"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) <a class="el" href="interface_c_d_audio_manager.html#a0d1e25778a1823456c3d65219a7d0562">end</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Shuts down the shared audio manager instance so that it can be reinitialised </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a2750af49fe41ee3fcf3d544f05ef3c73">SimpleAudioEngine::end</a>.</p>
<div class="fragment"><pre class="fragment">            {
        [sharedManager release];
        <a class="code" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a> = nil;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2d8ef3daed8297ee37cd14b67687407"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) <a class="el" href="interface_c_d_audio_manager.html#ae2d8ef3daed8297ee37cd14b67687407">init:</a> </td>
          <td></td>
          <td class="paramtype">(tAudioManagerMode)&#160;</td>
          <td class="paramname"><em>mode</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the engine synchronously with a mode, channel definition and a total number of channels </p>
<div class="fragment"><pre class="fragment">           : (tAudioManagerMode) mode {
        <span class="keywordflow">if</span> ((<span class="keyword">self</span> = [super init])) {

                <span class="comment">//Initialise the audio session</span>
                AVAudioSession* session = [AVAudioSession sharedInstance];
                session.delegate = <span class="keyword">self</span>;

                _mode = mode;
                backgroundMusicCompletionSelector = nil;
                _isObservingAppEvents = FALSE;
                _mute = NO;
                _resigned = NO;
                _interrupted = NO;
                enabled_ = YES;
                _audioSessionActive = NO;
                [<span class="keyword">self</span> setMode:mode];
                soundEngine = [[<a class="code" href="interface_c_d_sound_engine.html">CDSoundEngine</a> alloc] init];

                <span class="comment">//Set up audioSource channels</span>
                audioSourceChannels = [[NSMutableArray alloc] init];
                <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *leftChannel = [[<a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> alloc] init];
                leftChannel.backgroundMusic = YES;
                <a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> *rightChannel = [[<a class="code" href="interface_c_d_long_audio_source.html">CDLongAudioSource</a> alloc] init];
                rightChannel.backgroundMusic = NO;
                [audioSourceChannels insertObject:leftChannel atIndex:kASC_Left];
                [audioSourceChannels insertObject:rightChannel atIndex:kASC_Right];
                [leftChannel release];
                [rightChannel release];
                <span class="comment">//Used to support legacy APIs</span>
                backgroundMusic = [<span class="keyword">self</span> audioSourceForChannel:BACKGROUND_MUSIC_CHANNEL];
                backgroundMusic.delegate = <span class="keyword">self</span>;

                <span class="comment">//Add handler for bad al context messages, these are posted by the sound engine.</span>
                [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(badAlContextHandler) name:kCDN_BadAlContext object:nil];

        }
        <span class="keywordflow">return</span> <span class="keyword">self</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a208d173cd07d3ace248aff4bb16839b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) <a class="el" href="interface_c_d_audio_manager.html#a208d173cd07d3ace248aff4bb16839b9">initAsynchronously:</a> </td>
          <td></td>
          <td class="paramtype">(tAudioManagerMode)&#160;</td>
          <td class="paramname"><em>mode</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the engine asynchronously with a mode</p>
<p>Call this to set up audio manager asynchronously. Initialisation is finished when sharedManagerState == kAMStateInitialised </p>
<div class="fragment"><pre class="fragment">                           : (tAudioManagerMode) mode {
        @<span class="keyword">synchronized</span>(<span class="keyword">self</span>) {
                <span class="keywordflow">if</span> (_sharedManagerState == kAMStateUninitialised) {
                        _sharedManagerState = kAMStateInitialising;
                        [<a class="code" href="interface_c_d_audio_manager.html">CDAudioManager</a> <a class="code" href="interface_c_d_audio_manager.html#a4565c81bdaefd40cad943440c7a438ab">configure</a>:mode];
                        <a class="code" href="interface_c_d_asynch_initialiser.html">CDAsynchInitialiser</a> *initOp = [[[<a class="code" href="interface_c_d_asynch_initialiser.html">CDAsynchInitialiser</a> alloc] init] autorelease];
                        NSOperationQueue *opQ = [[[NSOperationQueue alloc] init] autorelease];
                        [opQ addOperation:initOp];
                }
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b519950dee5dd8e79c8bbbf3c0f7e26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) <a class="el" href="interface_c_d_audio_manager.html#a3b519950dee5dd8e79c8bbbf3c0f7e26">isBackgroundMusicPlaying</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns whether or not the background music is playing </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a973125b75501bf21ae82f30ab1aea87c">SimpleAudioEngine::isBackgroundMusicPlaying</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
        <span class="keywordflow">return</span> [<span class="keyword">self</span>.backgroundMusic isPlaying];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5a4df8bc83cbc6e6723196d3d4ec4974"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) <a class="el" href="interface_c_d_audio_manager.html#a5a4df8bc83cbc6e6723196d3d4ec4974">isDeviceMuted</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true is audio is muted at a hardware level e.g user has ringer switch set to off </p>
<div class="fragment"><pre class="fragment">                      {

<span class="preprocessor">#if TARGET_IPHONE_SIMULATOR</span>
<span class="preprocessor"></span>        <span class="comment">//Calling audio route stuff on the simulator causes problems</span>
        <span class="keywordflow">return</span> NO;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>        CFStringRef newAudioRoute;
        UInt32 propertySize = <span class="keyword">sizeof</span> (CFStringRef);

        AudioSessionGetProperty (
                                                         kAudioSessionProperty_AudioRoute,
                                                         &amp;propertySize,
                                                         &amp;newAudioRoute
                                                         );

        <span class="keywordflow">if</span> (newAudioRoute == NULL) {
                <span class="comment">//Don&#39;t expect this to happen but playing safe otherwise a null in the CFStringCompare will cause a crash</span>
                <span class="keywordflow">return</span> YES;
        } <span class="keywordflow">else</span> {
                CFComparisonResult newDeviceIsMuted =   CFStringCompare (
                                                                                                                                 newAudioRoute,
                                                                                                                                 (CFStringRef) <span class="stringliteral">@&quot;&quot;</span>,
                                                                                                                                 0
                                                                                                                                 );

                <span class="keywordflow">return</span> (newDeviceIsMuted == kCFCompareEqualTo);
        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ab664b34e99f6f3e2158f2df910cf3a95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) <a class="el" href="interface_c_d_audio_manager.html#ab664b34e99f6f3e2158f2df910cf3a95">isOtherAudioPlaying</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if another app is playing audio such as the iPod music player </p>

<p>Referenced by <a class="el" href="interface_c_d_audio_manager.html#a72fd182d62cc75dfa3701da4a5d97346">setMode:</a>.</p>
<div class="fragment"><pre class="fragment">                            {
        UInt32 isPlaying = 0;
        UInt32 varSize = <span class="keyword">sizeof</span>(isPlaying);
        AudioSessionGetProperty (kAudioSessionProperty_OtherAudioIsPlaying, &amp;varSize, &amp;isPlaying);
        <span class="keywordflow">return</span> (isPlaying != 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acbd505494ec2f01e484dfca635b208b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#acbd505494ec2f01e484dfca635b208b8">pauseBackgroundMusic</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pauses the background music </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#addf0536bfbb9ad38668108ee289ccaf6">SimpleAudioEngine::pauseBackgroundMusic</a>.</p>
<div class="fragment"><pre class="fragment">{
        [<span class="keyword">self</span>.backgroundMusic pause];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d7307effb3adbf755b1de16d82e7c45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) playBackgroundMusic: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>filePath</em></td>
        </tr>
        <tr>
          <td class="paramkey">loop:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>loop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Plays music in background. The music can be looped or not It is recommended to use .aac files as background music since they are decoded by the device (hardware). </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#ae48157a1dea7e96833cb705bd6cd6709">SimpleAudioEngine::playBackgroundMusic:</a>, and <a class="el" href="interface_simple_audio_engine.html#aec9fc4c618da2902f26615c087179508">SimpleAudioEngine::playBackgroundMusic:loop:</a>.</p>
<div class="fragment"><pre class="fragment">                           :(NSString*) filePath loop:(BOOL) loop
{
        [<span class="keyword">self</span>.backgroundMusic load:filePath];

        <span class="keywordflow">if</span> (loop) {
                [<span class="keyword">self</span>.backgroundMusic setNumberOfLoops:-1];
        } <span class="keywordflow">else</span> {
                [<span class="keyword">self</span>.backgroundMusic setNumberOfLoops:0];
        }

        <span class="keywordflow">if</span> (!willPlayBackgroundMusic || _mute) {
                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - play bgm aborted because audio is not exclusive or sound is muted&quot;</span>);
                <span class="keywordflow">return</span>;
        }

        [<span class="keyword">self</span>.backgroundMusic play];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a613d13a6227a90dd5a073dbde1ac447b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a613d13a6227a90dd5a073dbde1ac447b">preloadBackgroundMusic:</a> </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>filePath</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Preloads a background music </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a289e2e89ab55d63a38792fd8f2e5b645">SimpleAudioEngine::preloadBackgroundMusic:</a>.</p>
<div class="fragment"><pre class="fragment">                              :(NSString*) filePath
{
        [<span class="keyword">self</span>.backgroundMusic load:filePath];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9bcc620677df7b828dd69c951b445062"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a9bcc620677df7b828dd69c951b445062">resumeBackgroundMusic</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resumes playing the background music </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a565f2d3e28072b6a7173064b797767c0">SimpleAudioEngine::resumeBackgroundMusic</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span> (!willPlayBackgroundMusic || _mute) {
                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - resume bgm aborted because audio is not exclusive or sound is muted&quot;</span>);
                <span class="keywordflow">return</span>;
        }

        [<span class="keyword">self</span>.backgroundMusic resume];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98e99a2b9eabcf89ad7419f6f809c65a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a98e99a2b9eabcf89ad7419f6f809c65a">rewindBackgroundMusic</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rewinds the background music </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#ab91dfde414f3ef20ccd891e59ba5a67d">SimpleAudioEngine::rewindBackgroundMusic</a>.</p>
<div class="fragment"><pre class="fragment">{
        [<span class="keyword">self</span>.backgroundMusic rewind];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a72fd182d62cc75dfa3701da4a5d97346"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a72fd182d62cc75dfa3701da4a5d97346">setMode:</a> </td>
          <td></td>
          <td class="paramtype">(tAudioManagerMode)&#160;</td>
          <td class="paramname"><em>mode</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the way the audio manager interacts with the operating system such as whether it shares output with other apps or obeys the mute switch </p>

<p>Referenced by <a class="el" href="interface_c_d_audio_manager.html#aa572c7a296c0b2de3564f8da368835ef">applicationDidBecomeActive</a>, and <a class="el" href="interface_c_d_audio_manager.html#ae2d8ef3daed8297ee37cd14b67687407">init:</a>.</p>
<div class="fragment"><pre class="fragment">               :(tAudioManagerMode) mode {

        _mode = mode;
        <span class="keywordflow">switch</span> (_mode) {

                <span class="keywordflow">case</span> kAMM_FxOnly:
                        <span class="comment">//Share audio with other app</span>
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - Audio will be shared&quot;</span>);
                        <span class="comment">//_audioSessionCategory = kAudioSessionCategory_AmbientSound;</span>
                        _audioSessionCategory = AVAudioSessionCategoryAmbient;
                        willPlayBackgroundMusic = NO;
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> kAMM_FxPlusMusic:
                        <span class="comment">//Use audio exclusively - if other audio is playing it will be stopped</span>
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager -  Audio will be exclusive&quot;</span>);
                        <span class="comment">//_audioSessionCategory = kAudioSessionCategory_SoloAmbientSound;</span>
                        _audioSessionCategory = AVAudioSessionCategorySoloAmbient;
                        willPlayBackgroundMusic = YES;
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> kAMM_MediaPlayback:
                        <span class="comment">//Use audio exclusively, ignore mute switch and sleep</span>
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager -  Media playback mode, audio will be exclusive&quot;</span>);
                        <span class="comment">//_audioSessionCategory = kAudioSessionCategory_MediaPlayback;</span>
                        _audioSessionCategory = AVAudioSessionCategoryPlayback;
                        willPlayBackgroundMusic = YES;
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> kAMM_PlayAndRecord:
                        <span class="comment">//Use audio exclusively, ignore mute switch and sleep, has inputs and outputs</span>
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager -  Play and record mode, audio will be exclusive&quot;</span>);
                        <span class="comment">//_audioSessionCategory = kAudioSessionCategory_PlayAndRecord;</span>
                        _audioSessionCategory = AVAudioSessionCategoryPlayAndRecord;
                        willPlayBackgroundMusic = YES;
                        <span class="keywordflow">break</span>;

                <span class="keywordflow">default</span>:
                        <span class="comment">//kAudioManagerFxPlusMusicIfNoOtherAudio</span>
                        <span class="keywordflow">if</span> ([<span class="keyword">self</span> <a class="code" href="interface_c_d_audio_manager.html#ab664b34e99f6f3e2158f2df910cf3a95">isOtherAudioPlaying</a>]) {
                                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - Other audio is playing audio will be shared&quot;</span>);
                                <span class="comment">//_audioSessionCategory = kAudioSessionCategory_AmbientSound;</span>
                                _audioSessionCategory = AVAudioSessionCategoryAmbient;
                                willPlayBackgroundMusic = NO;
                        } <span class="keywordflow">else</span> {
                                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDAudioManager - Other audio is not playing audio will be exclusive&quot;</span>);
                                <span class="comment">//_audioSessionCategory = kAudioSessionCategory_SoloAmbientSound;</span>
                                _audioSessionCategory = AVAudioSessionCategorySoloAmbient;
                                willPlayBackgroundMusic = YES;
                        }

                        <span class="keywordflow">break</span>;
        }

        [<span class="keyword">self</span> audioSessionSetCategory:_audioSessionCategory];

}
</pre></div>
</div>
</div>
<a class="anchor" id="a757b69bd4a902166b3ffa81ea85ba6e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interface_c_d_audio_manager.html">CDAudioManager</a> *) <a class="el" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the shared singleton </p>

<p>Referenced by <a class="el" href="interface_c_d_audio_manager.html#a0d1e25778a1823456c3d65219a7d0562">end</a>, and <a class="el" href="interface_the_audio_code.html#acd74afe261a0eb9b4ba4f618ea5a6aca">TheAudioCode::testEight:</a>.</p>
<div class="fragment"><pre class="fragment">{
        @<span class="keyword">synchronized</span>(<span class="keyword">self</span>)     {
                <span class="keywordflow">if</span> (!<a class="code" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a>) {
                        <span class="keywordflow">if</span> (!configured) {
                                <span class="comment">//Set defaults here</span>
                                configuredMode = kAMM_FxPlusMusicIfNoOtherAudio;
                        }
                        <a class="code" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a> = [[<a class="code" href="interface_c_d_audio_manager.html">CDAudioManager</a> alloc] init:configuredMode];
                        _sharedManagerState = kAMStateInitialised;<span class="comment">//This is only really relevant when using asynchronous initialisation</span>
                        [[NSNotificationCenter defaultCenter] postNotificationName:kCDN_AudioManagerInitialised object:nil];
                }
        }
        <span class="keywordflow">return</span> <a class="code" href="interface_c_d_audio_manager.html#a757b69bd4a902166b3ffa81ea85ba6e8">sharedManager</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2403abdc32f144a0d57d915db42d35a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_audio_manager.html#a2403abdc32f144a0d57d915db42d35a6">stopBackgroundMusic</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops playing the background music </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a81e61f21116fc8d46b8242e9caa48006">SimpleAudioEngine::stopBackgroundMusic</a>.</p>
<div class="fragment"><pre class="fragment">{
        [<span class="keyword">self</span>.backgroundMusic stop];
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/CocosDenshion/CocosDenshion/<a class="el" href="_c_d_audio_manager_8h_source.html">CDAudioManager.h</a></li>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/CocosDenshion/CocosDenshion/CDAudioManager.m</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interface_c_d_audio_manager.html">CDAudioManager</a>      </li>

    <li class="footer">Generated on Wed Jan 30 2013 23:41:12 for cocos2d-iphone-2.1-beta4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
