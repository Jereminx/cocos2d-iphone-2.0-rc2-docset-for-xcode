<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cocos2d-iphone-2.1-beta4: CDSoundEngine Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos2d-iphone-2.1-beta4
   &#160;<span id="projectnumber">2.1-beta4</span>
   </div>
   <div id="projectbrief">zhxubing@gmail.com</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interface_c_d_sound_engine.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CDSoundEngine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for CDSoundEngine:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_c_d_sound_engine.png" usemap="#CDSoundEngine_map" alt=""/>
  <map id="CDSoundEngine_map" name="CDSoundEngine_map">
<area href="class_n_s_object.html" alt="NSObject" shape="rect" coords="0,0,171,24"/>
<area href="protocol_c_d_audio_interrupt_protocol-p.html" alt="&lt;CDAudioInterruptProtocol&gt;" shape="rect" coords="181,0,352,24"/>
</map>
 </div></div>

<p><a href="class_c_d_sound_engine-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a013cb9b6cf86c0dbfca8fac6aae0bd6a"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a013cb9b6cf86c0dbfca8fac6aae0bd6a">init</a></td></tr>
<tr class="memitem:aba5e66f1767cf41ef07524e17a1e295e"><td class="memItemLeft" align="right" valign="top">(ALuint)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#aba5e66f1767cf41ef07524e17a1e295e">playSound:sourceGroupId:pitch:pan:gain:loop:</a></td></tr>
<tr class="memitem:afdd95c8c9b8ffe667db2215312830e8e"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_c_d_sound_source.html">CDSoundSource</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#afdd95c8c9b8ffe667db2215312830e8e">soundSourceForSound:sourceGroupId:</a></td></tr>
<tr class="memitem:ae2bbd23eefecd32afcf6bc0109b5e7a2"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#ae2bbd23eefecd32afcf6bc0109b5e7a2">stopSound:</a></td></tr>
<tr class="memitem:a5d6fbd530895fac2ce486a478e46fb23"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a5d6fbd530895fac2ce486a478e46fb23">stopSourceGroup:</a></td></tr>
<tr class="memitem:a8bbc63632a5e72c9235c39730e8efb38"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a8bbc63632a5e72c9235c39730e8efb38">stopAllSounds</a></td></tr>
<tr class="memitem:a5940b79595deabff5cab67987133c518"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5940b79595deabff5cab67987133c518"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>defineSourceGroups:</b></td></tr>
<tr class="memitem:a60a79a0a54fcd18139a854d6b1a63be9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a60a79a0a54fcd18139a854d6b1a63be9"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>defineSourceGroups:total:</b></td></tr>
<tr class="memitem:ad49927027ac1c88db0bb96907f8ba03f"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#ad49927027ac1c88db0bb96907f8ba03f">setSourceGroupNonInterruptible:isNonInterruptible:</a></td></tr>
<tr class="memitem:af2e9e6ed68c37e25d2b9c7a671ab0ea4"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#af2e9e6ed68c37e25d2b9c7a671ab0ea4">setSourceGroupEnabled:enabled:</a></td></tr>
<tr class="memitem:a9e73b1f9ce070579469e18da0fdabf5a"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a9e73b1f9ce070579469e18da0fdabf5a">sourceGroupEnabled:</a></td></tr>
<tr class="memitem:afec37cdfa7a31949aaa199f3aa56de9a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afec37cdfa7a31949aaa199f3aa56de9a"></a>
(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <b>loadBufferFromData:soundData:format:size:freq:</b></td></tr>
<tr class="memitem:ac3e13dbda55481b0b30e7ad8265867e4"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#ac3e13dbda55481b0b30e7ad8265867e4">loadBuffer:filePath:</a></td></tr>
<tr class="memitem:a8ab83905d8865c75c8055871f5c84fdd"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a8ab83905d8865c75c8055871f5c84fdd">loadBuffersAsynchronously:</a></td></tr>
<tr class="memitem:a2a245d09bd9aa88de752c97dd889662e"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a2a245d09bd9aa88de752c97dd889662e">unloadBuffer:</a></td></tr>
<tr class="memitem:a3207754d8ae7d5a63dc03fd43b698d12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3207754d8ae7d5a63dc03fd43b698d12"></a>
(ALCcontext *)&#160;</td><td class="memItemRight" valign="bottom">- <b>openALContext</b></td></tr>
<tr class="memitem:a5731f4ec2052eb323ba1777f72c9da8c"><td class="memItemLeft" align="right" valign="top">(float)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a5731f4ec2052eb323ba1777f72c9da8c">bufferDurationInSeconds:</a></td></tr>
<tr class="memitem:a91672bece24f10760d62cce27986573e"><td class="memItemLeft" align="right" valign="top">(ALsizei)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#a91672bece24f10760d62cce27986573e">bufferSizeInBytes:</a></td></tr>
<tr class="memitem:af8559b48f34ad22ba9a7cf27ffcb8648"><td class="memItemLeft" align="right" valign="top">(ALsizei)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#af8559b48f34ad22ba9a7cf27ffcb8648">bufferFrequencyInHertz:</a></td></tr>
<tr class="memitem:ad05b4a121e37fe36d3df453989be82af"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_d_sound_engine.html#ad05b4a121e37fe36d3df453989be82af">_soundSourcePreRelease:</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab917455684b0ff4ea92e3d2a82d3530c"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_d_sound_engine.html#ab917455684b0ff4ea92e3d2a82d3530c">setMixerSampleRate:</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a24c00fc3596fa6c480fe85b17d73ec11"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24c00fc3596fa6c480fe85b17d73ec11"></a>
<a class="el" href="struct__buffer_info.html">bufferInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>_buffers</b></td></tr>
<tr class="memitem:afdfb398cff28e646f583c6ee649ca8c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afdfb398cff28e646f583c6ee649ca8c5"></a>
<a class="el" href="struct__source_info.html">sourceInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>_sources</b></td></tr>
<tr class="memitem:a9690bcaf60bd2dfed58916688e932227"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9690bcaf60bd2dfed58916688e932227"></a>
<a class="el" href="struct__source_group.html">sourceGroup</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>_sourceGroups</b></td></tr>
<tr class="memitem:a814a2bfd62e56c98d4db5371dcb44da1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a814a2bfd62e56c98d4db5371dcb44da1"></a>
ALCcontext *&#160;</td><td class="memItemRight" valign="bottom"><b>context</b></td></tr>
<tr class="memitem:a16ab034b0cda9256351f3e22a06e4fcf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a16ab034b0cda9256351f3e22a06e4fcf"></a>
NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><b>_sourceGroupTotal</b></td></tr>
<tr class="memitem:ad2126356e66caf4b92ecb57277c77d94"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2126356e66caf4b92ecb57277c77d94"></a>
UInt32&#160;</td><td class="memItemRight" valign="bottom"><b>_audioSessionCategory</b></td></tr>
<tr class="memitem:a3baf5095e6dda801f7ad5b7d8ecd8224"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3baf5095e6dda801f7ad5b7d8ecd8224"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>_handleAudioSession</b></td></tr>
<tr class="memitem:a5b962923ea973f81a867d00be27ebb49"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5b962923ea973f81a867d00be27ebb49"></a>
ALfloat&#160;</td><td class="memItemRight" valign="bottom"><b>_preMuteGain</b></td></tr>
<tr class="memitem:a259fd68f63e1cda4737eb6ae8d967200"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a259fd68f63e1cda4737eb6ae8d967200"></a>
<a class="el" href="class_n_s_object.html">NSObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>_mutexBufferLoad</b></td></tr>
<tr class="memitem:a0f895a12c62db7b02a742eaa3f543f0f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f895a12c62db7b02a742eaa3f543f0f"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>mute_</b></td></tr>
<tr class="memitem:a7b1d6a808ba86ea16210b5415321d2be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b1d6a808ba86ea16210b5415321d2be"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>enabled_</b></td></tr>
<tr class="memitem:afaf546a9c2e8bf500e5de983c17a99c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afaf546a9c2e8bf500e5de983c17a99c4"></a>
ALenum&#160;</td><td class="memItemRight" valign="bottom"><b>lastErrorCode_</b></td></tr>
<tr class="memitem:aeb7a5e82782360886640ef09b0e74062"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb7a5e82782360886640ef09b0e74062"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>functioning_</b></td></tr>
<tr class="memitem:af71175549f6bc0df968f0808f25c9596"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af71175549f6bc0df968f0808f25c9596"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>asynchLoadProgress_</b></td></tr>
<tr class="memitem:aebd938a1808eafec585658d992b0ad50"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aebd938a1808eafec585658d992b0ad50"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>getGainWorks_</b></td></tr>
<tr class="memitem:a2b2e19f3b3fcd945504d7ac07936cb74"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b2e19f3b3fcd945504d7ac07936cb74"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sourceTotal_</b></td></tr>
<tr class="memitem:af3c8da3458f32d8ceaf5517a3763ec25"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3c8da3458f32d8ceaf5517a3763ec25"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>bufferTotal</b></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a96d6c388b213e392ff18d10dd5b65bcc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96d6c388b213e392ff18d10dd5b65bcc"></a>
ALfloat&#160;</td><td class="memItemRight" valign="bottom"><b>masterGain</b></td></tr>
<tr class="memitem:adcaee276e577e18c0695b3c898dc4b73"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcaee276e577e18c0695b3c898dc4b73"></a>
ALenum&#160;</td><td class="memItemRight" valign="bottom"><b>lastErrorCode</b></td></tr>
<tr class="memitem:ae41ed791ec668d068862b5a3280f594e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae41ed791ec668d068862b5a3280f594e"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>functioning</b></td></tr>
<tr class="memitem:a90eef03bd81033435088cfff2606fe39"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90eef03bd81033435088cfff2606fe39"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>asynchLoadProgress</b></td></tr>
<tr class="memitem:ab4b1226112dec878ada892eff9fb0244"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4b1226112dec878ada892eff9fb0244"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>getGainWorks</b></td></tr>
<tr class="memitem:a951c8a98f46192e4ed56ebe41f7abe59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_d_sound_engine.html#a951c8a98f46192e4ed56ebe41f7abe59">sourceTotal</a></td></tr>
<tr class="memitem:a2e416630cc0722eac6ba889dcb9461ba"><td class="memItemLeft" align="right" valign="top">NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_d_sound_engine.html#a2e416630cc0722eac6ba889dcb9461ba">sourceGroupTotal</a></td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad05b4a121e37fe36d3df453989be82af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_sound_engine.html#ad05b4a121e37fe36d3df453989be82af">_soundSourcePreRelease:</a> </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_d_sound_source.html">CDSoundSource</a> *)&#160;</td>
          <td class="paramname"><em>soundSource</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used internally, never call unless you know what you are doing </p>
<div class="fragment"><pre class="fragment">                              :(<a class="code" href="interface_c_d_sound_source.html">CDSoundSource</a> *) soundSource {
        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine _soundSourcePreRelease %i&quot;</span>,soundSource-&gt;_sourceIndex);
        <span class="comment">//Unlock the sound source&#39;s source</span>
        [<span class="keyword">self</span> _lockSource:soundSource-&gt;_sourceIndex lock:NO];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5731f4ec2052eb323ba1777f72c9da8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (float) <a class="el" href="interface_c_d_sound_engine.html#a5731f4ec2052eb323ba1777f72c9da8c">bufferDurationInSeconds:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the duration of the buffer in seconds or a negative value if the buffer id is invalid </p>
<div class="fragment"><pre class="fragment">                                :(int) soundId {
        <span class="keywordflow">if</span> ([<span class="keyword">self</span> validateBufferId:soundId]) {
                <span class="keywordtype">float</span> factor = 0.0f;
                <span class="keywordflow">switch</span> (_buffers[soundId].format) {
                        <span class="keywordflow">case</span> AL_FORMAT_MONO8:
                                factor = 1.0f;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> AL_FORMAT_MONO16:
                                factor = 0.5f;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> AL_FORMAT_STEREO8:
                                factor = 0.5f;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> AL_FORMAT_STEREO16:
                                factor = 0.25f;
                                <span class="keywordflow">break</span>;
                }
                <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)_buffers[soundId].sizeInBytes/(float)_buffers[soundId].frequencyInHertz * factor;
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">return</span> -1.0f;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8559b48f34ad22ba9a7cf27ffcb8648"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (ALsizei) <a class="el" href="interface_c_d_sound_engine.html#af8559b48f34ad22ba9a7cf27ffcb8648">bufferFrequencyInHertz:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sampling frequency of the buffer in hertz or a negative value if the buffer id is invalid </p>
<div class="fragment"><pre class="fragment">                                 :(int) soundId {
        <span class="keywordflow">if</span> ([<span class="keyword">self</span> validateBufferId:soundId]) {
                <span class="keywordflow">return</span> _buffers[soundId].frequencyInHertz;
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">return</span> -1.0f;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a91672bece24f10760d62cce27986573e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (ALsizei) <a class="el" href="interface_c_d_sound_engine.html#a91672bece24f10760d62cce27986573e">bufferSizeInBytes:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the size of the buffer in bytes or a negative value if the buffer id is invalid </p>
<div class="fragment"><pre class="fragment">                            :(int) soundId {
        <span class="keywordflow">if</span> ([<span class="keyword">self</span> validateBufferId:soundId]) {
                <span class="keywordflow">return</span> _buffers[soundId].sizeInBytes;
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">return</span> -1.0f;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a013cb9b6cf86c0dbfca8fac6aae0bd6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) <a class="el" href="interface_c_d_sound_engine.html#a013cb9b6cf86c0dbfca8fac6aae0bd6a">init</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the engine with a group definition and a total number of groups </p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span> ((<span class="keyword">self</span> = [super <a class="code" href="interface_c_d_sound_engine.html#a013cb9b6cf86c0dbfca8fac6aae0bd6a">init</a>])) {

                <span class="comment">//Create mutexes</span>
                _mutexBufferLoad = [[<a class="code" href="class_n_s_object.html">NSObject</a> alloc] init];

                asynchLoadProgress_ = 0.0f;

                bufferTotal = CD_BUFFERS_START;
                _buffers = (<a class="code" href="struct__buffer_info.html">bufferInfo</a> *)malloc( <span class="keyword">sizeof</span>(_buffers[0]) * bufferTotal);

                <span class="comment">// Initialize our OpenAL environment</span>
                <span class="keywordflow">if</span> ([<span class="keyword">self</span> _initOpenAL]) {
                        <span class="comment">//Set up the default source group - a single group that contains all the sources</span>
                        <span class="keywordtype">int</span> sourceDefs[1];
                        sourceDefs[0] = <span class="keyword">self</span>.sourceTotal;
                        [<span class="keyword">self</span> _setUpSourceGroups:sourceDefs total:1];

                        functioning_ = YES;
                        <span class="comment">//Synchronize premute gain</span>
                        _preMuteGain = <span class="keyword">self</span>.masterGain;
                        mute_ = NO;
                        enabled_ = YES;
                        <span class="comment">//Test whether get gain works for sources</span>
                        [<span class="keyword">self</span> _testGetGain];
                } <span class="keywordflow">else</span> {
                        <span class="comment">//Something went wrong with OpenAL</span>
                        functioning_ = NO;
                }
        }

        <span class="keywordflow">return</span> <span class="keyword">self</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3e13dbda55481b0b30e7ad8265867e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) loadBuffer: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
        </tr>
        <tr>
          <td class="paramkey">filePath:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>filePath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load sound data for later play back. </p>
<dl class="section return"><dt>Returns:</dt><dd>TRUE if buffer loaded okay for play back otherwise false </dd></dl>
<div class="fragment"><pre class="fragment">                   :(int) soundId filePath:(NSString*) filePath
{

        ALvoid* data;
        ALenum  format;
        ALsizei size;
        ALsizei freq;

        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - Loading openAL buffer %i %@&quot;</span>, soundId, filePath);

        CFURLRef fileURL = nil;
        NSString *path = [<a class="code" href="interface_c_d_utilities.html">CDUtilities</a> <a class="code" href="interface_c_d_utilities.html#a0b870cdbce4ca5a7f13a992034d668d6">fullPathFromRelativePath</a>:filePath];
        <span class="keywordflow">if</span> (path) {
                fileURL = (CFURLRef)[[NSURL fileURLWithPath:path] retain];
        }

        <span class="keywordflow">if</span> (fileURL)
        {
                data = CDGetOpenALAudioData(fileURL, &amp;size, &amp;format, &amp;freq);
                CFRelease(fileURL);
                BOOL result = [<span class="keyword">self</span> loadBufferFromData:soundId soundData:data format:format size:size freq:freq];
<span class="preprocessor">#ifndef CD_USE_STATIC_BUFFERS</span>
<span class="preprocessor"></span>                free(data);<span class="comment">//Data can be freed here because alBufferData performs a memcpy</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> result;
        } <span class="keywordflow">else</span> {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine Could not find file!\n&quot;</span>);
                <span class="comment">//Don&#39;t change buffer state here as it will be the same as before method was called</span>
                <span class="keywordflow">return</span> FALSE;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ab83905d8865c75c8055871f5c84fdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_sound_engine.html#a8ab83905d8865c75c8055871f5c84fdd">loadBuffersAsynchronously:</a> </td>
          <td></td>
          <td class="paramtype">(NSArray *)&#160;</td>
          <td class="paramname"><em>loadRequests</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load buffers asynchronously Check asynchLoadProgress for progress. asynchLoadProgress represents fraction of completion. When it equals 1.0 loading is complete. NB: asynchLoadProgress is simply based on the number of load requests, it does not take into account file sizes. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">An</td><td>array of <a class="el" href="interface_c_d_buffer_load_request.html">CDBufferLoadRequest</a> objects </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                  :(NSArray *) loadRequests {
        @<span class="keyword">synchronized</span>(<span class="keyword">self</span>) {
                asynchLoadProgress_ = 0.0f;
                <a class="code" href="interface_c_d_asynch_buffer_loader.html">CDAsynchBufferLoader</a> *loaderOp = [[[<a class="code" href="interface_c_d_asynch_buffer_loader.html">CDAsynchBufferLoader</a> alloc] init:loadRequests soundEngine:self] autorelease];
                NSOperationQueue *opQ = [[[NSOperationQueue alloc] init] autorelease];
                [opQ addOperation:loaderOp];
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aba5e66f1767cf41ef07524e17a1e295e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (ALuint) playSound: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
        </tr>
        <tr>
          <td class="paramkey">sourceGroupId:</td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em></td>
        </tr>
        <tr>
          <td class="paramkey">pitch:</td>
          <td></td>
          <td class="paramtype">(float)&#160;</td>
          <td class="paramname"><em>pitch</em></td>
        </tr>
        <tr>
          <td class="paramkey">pan:</td>
          <td></td>
          <td class="paramtype">(float)&#160;</td>
          <td class="paramname"><em>pan</em></td>
        </tr>
        <tr>
          <td class="paramkey">gain:</td>
          <td></td>
          <td class="paramtype">(float)&#160;</td>
          <td class="paramname"><em>gain</em></td>
        </tr>
        <tr>
          <td class="paramkey">loop:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>loop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Plays a sound in a channel group with a pitch, pan and gain. The sound could played looped or not</p>
<p>Play a sound. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">soundId</td><td>the id of the sound to play (buffer id). </td></tr>
    <tr><td class="paramname">SourceGroupId</td><td>the source group that will be used to play the sound. </td></tr>
    <tr><td class="paramname">pitch</td><td>pitch multiplier. e.g 1.0 is unaltered, 0.5 is 1 octave lower. </td></tr>
    <tr><td class="paramname">pan</td><td>stereo position. -1 is fully left, 0 is centre and 1 is fully right. </td></tr>
    <tr><td class="paramname">gain</td><td>gain multiplier. e.g. 1.0 is unaltered, 0.5 is half the gain </td></tr>
    <tr><td class="paramname">loop</td><td>should the sound be looped or one shot. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the id of the source being used to play the sound or CD_MUTE if the sound engine is muted or non functioning or CD_NO_SOURCE if a problem occurs setting up the source </dd></dl>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#aed4a3e55cdbae87e3129c9ed54db1ced">SimpleAudioEngine::playEffect:pitch:pan:gain:</a>.</p>
<div class="fragment"><pre class="fragment">                   :(int) soundId sourceGroupId:(<span class="keywordtype">int</span>)sourceGroupId pitch:(float) pitch pan:(<span class="keywordtype">float</span>) pan gain:(float) gain loop:(BOOL) loop {

<span class="preprocessor">#ifdef CD_DEBUG</span>
<span class="preprocessor"></span>        <span class="comment">//Sanity check parameters - only in DEBUG</span>
        NSAssert(soundId &gt;= 0, <span class="stringliteral">@&quot;soundId can not be negative&quot;</span>);
        NSAssert(soundId &lt; bufferTotal, <span class="stringliteral">@&quot;soundId exceeds limit&quot;</span>);
        NSAssert(sourceGroupId &gt;= 0, <span class="stringliteral">@&quot;sourceGroupId can not be negative&quot;</span>);
        NSAssert(sourceGroupId &lt; _sourceGroupTotal, <span class="stringliteral">@&quot;sourceGroupId exceeds limit&quot;</span>);
        NSAssert(pitch &gt; 0, <span class="stringliteral">@&quot;pitch must be greater than zero&quot;</span>);
        NSAssert(pan &gt;= -1 &amp;&amp; pan &lt;= 1, <span class="stringliteral">@&quot;pan must be between -1 and 1&quot;</span>);
        NSAssert(gain &gt;= 0, <span class="stringliteral">@&quot;gain can not be negative&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        <span class="comment">//If mute or initialisation has failed or buffer is not loaded then do nothing</span>
        <span class="keywordflow">if</span> (!enabled_ || !functioning_ || _buffers[soundId].bufferState != CD_BS_LOADED || _sourceGroups[sourceGroupId].<a class="code" href="protocol_c_d_audio_interrupt_protocol-p.html#ac0773ba4bb34dedae61d8927a03bb565">enabled</a>) {
<span class="preprocessor">#ifdef CD_DEBUG</span>
<span class="preprocessor"></span>                <span class="keywordflow">if</span> (!functioning_) {
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - sound playback aborted because sound engine is not functioning&quot;</span>);
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_buffers[soundId].bufferState != CD_BS_LOADED) {
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - sound playback aborted because buffer %i is not loaded&quot;</span>, soundId);
                }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">return</span> CD_MUTE;
        }

        <span class="keywordtype">int</span> sourceIndex = [<span class="keyword">self</span> _getSourceIndexForSourceGroup:sourceGroupId];<span class="comment">//This method ensures sourceIndex is valid</span>

        <span class="keywordflow">if</span> (sourceIndex != CD_NO_SOURCE) {
                ALint state;
                ALuint source = _sources[sourceIndex].sourceId;
                ALuint buffer = _buffers[soundId].bufferId;
                alGetError();<span class="comment">//Clear the error code</span>
                alGetSourcei(source, AL_SOURCE_STATE, &amp;state);
                <span class="keywordflow">if</span> (state == AL_PLAYING) {
                        alSourceStop(source);
                }
                alSourcei(source, AL_BUFFER, buffer);<span class="comment">//Attach to sound</span>
                alSourcef(source, AL_PITCH, pitch);<span class="comment">//Set pitch</span>
                alSourcei(source, AL_LOOPING, loop);<span class="comment">//Set looping</span>
                alSourcef(source, AL_GAIN, gain);<span class="comment">//Set gain/volume</span>
                <span class="keywordtype">float</span> sourcePosAL[] = {pan, 0.0f, 0.0f};<span class="comment">//Set position - just using left and right panning</span>
                alSourcefv(source, AL_POSITION, sourcePosAL);
                alGetError();<span class="comment">//Clear the error code</span>
                alSourcePlay(source);
                <span class="keywordflow">if</span>((lastErrorCode_ = alGetError()) == AL_NO_ERROR) {
                        <span class="comment">//Everything was okay</span>
                        _sources[sourceIndex].attachedBufferId = buffer;
                        <span class="keywordflow">return</span> source;
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">if</span> (alcGetCurrentContext() == NULL) {
                                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - posting bad OpenAL context message&quot;</span>);
                                [[NSNotificationCenter defaultCenter] postNotificationName:kCDN_BadAlContext object:nil];
                        }
                        <span class="keywordflow">return</span> CD_NO_SOURCE;
                }
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">return</span> CD_NO_SOURCE;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab917455684b0ff4ea92e3d2a82d3530c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (void) <a class="el" href="interface_c_d_sound_engine.html#ab917455684b0ff4ea92e3d2a82d3530c">setMixerSampleRate:</a> </td>
          <td></td>
          <td class="paramtype">(Float32)&#160;</td>
          <td class="paramname"><em>sampleRate</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the sample rate for the audio mixer. For best performance this should match the sample rate of your audio content </p>
<div class="fragment"><pre class="fragment">                           :(Float32) sampleRate {
        _mixerRateSet = YES;
        _mixerSampleRate = sampleRate;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2e9e6ed68c37e25d2b9c7a671ab0ea4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setSourceGroupEnabled: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em></td>
        </tr>
        <tr>
          <td class="paramkey">enabled:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the mute property for a source group. If mute is turned on any sounds in that source group will be stopped and further sounds in that source group will play. However, turning mute off will not restart any sounds that were playing when mute was turned on. Also the mute setting for the sound engine must be taken into account. If the sound engine is mute no sounds will play no matter what the source group mute setting is. </p>
<div class="fragment"><pre class="fragment">                              :(int) sourceGroupId <a class="code" href="protocol_c_d_audio_interrupt_protocol-p.html#ac0773ba4bb34dedae61d8927a03bb565">enabled</a>:(BOOL) <a class="code" href="protocol_c_d_audio_interrupt_protocol-p.html#ac0773ba4bb34dedae61d8927a03bb565">enabled</a> {
        <span class="comment">//Ensure source group id is valid to prevent memory corruption</span>
        <span class="keywordflow">if</span> (sourceGroupId &lt; 0 || sourceGroupId &gt;= _sourceGroupTotal) {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine setSourceGroupEnabled invalid source group id %i&quot;</span>,sourceGroupId);
                <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="protocol_c_d_audio_interrupt_protocol-p.html#ac0773ba4bb34dedae61d8927a03bb565">enabled</a>) {
                _sourceGroups[sourceGroupId].enabled = <span class="keyword">true</span>;
                [<span class="keyword">self</span> stopSourceGroup:sourceGroupId];
        } <span class="keywordflow">else</span> {
                _sourceGroups[sourceGroupId].enabled = <span class="keyword">false</span>;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad49927027ac1c88db0bb96907f8ba03f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setSourceGroupNonInterruptible: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em></td>
        </tr>
        <tr>
          <td class="paramkey">isNonInterruptible:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>isNonInterruptible</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set a source group as non interruptible. Default is that source groups are interruptible. Non interruptible means that if a request to play a sound is made for a source group and there are no free sources available then the play request will be ignored and CD_NO_SOURCE will be returned. </p>
<div class="fragment"><pre class="fragment">                                       :(int) sourceGroupId isNonInterruptible:(BOOL) isNonInterruptible {
        <span class="comment">//Ensure source group id is valid to prevent memory corruption</span>
        <span class="keywordflow">if</span> (sourceGroupId &lt; 0 || sourceGroupId &gt;= _sourceGroupTotal) {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine setSourceGroupNonInterruptible invalid source group id %i&quot;</span>,sourceGroupId);
                <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> (isNonInterruptible) {
                _sourceGroups[sourceGroupId].nonInterruptible = <span class="keyword">true</span>;
        } <span class="keywordflow">else</span> {
                _sourceGroups[sourceGroupId].nonInterruptible = <span class="keyword">false</span>;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afdd95c8c9b8ffe667db2215312830e8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_d_sound_source.html">CDSoundSource</a> *) soundSourceForSound: </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
        </tr>
        <tr>
          <td class="paramkey">sourceGroupId:</td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates and returns a sound source object for the specified sound within the specified source group.</p>
<p>Get a sound source for the specified sound in the specified source group </p>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a8ab8450895ef35d23744db31e5826d01">SimpleAudioEngine::soundSourceForFile:</a>.</p>
<div class="fragment"><pre class="fragment">                                      :(int) soundId sourceGroupId:(<span class="keywordtype">int</span>) sourceGroupId
{
        <span class="keywordflow">if</span> (!functioning_) {
                <span class="keywordflow">return</span> nil;
        }
        <span class="comment">//Check if a source is available</span>
        <span class="keywordtype">int</span> sourceIndex = [<span class="keyword">self</span> _getSourceIndexForSourceGroup:sourceGroupId];
        <span class="keywordflow">if</span> (sourceIndex != CD_NO_SOURCE) {
                <a class="code" href="interface_c_d_sound_source.html">CDSoundSource</a> *result = [[<a class="code" href="interface_c_d_sound_source.html">CDSoundSource</a> alloc] init:_sources[sourceIndex].sourceId sourceIndex:sourceIndex soundEngine:self];
                [<span class="keyword">self</span> _lockSource:sourceIndex lock:YES];
                <span class="comment">//Try to attach to the buffer</span>
                <span class="keywordflow">if</span> ([<span class="keyword">self</span> _soundSourceAttachToBuffer:result soundId:soundId]) {
                        <span class="comment">//Set to a known state</span>
                        result.pitch = 1.0f;
                        result.pan = 0.0f;
                        result.gain = 1.0f;
                        result.looping = NO;
                        <span class="keywordflow">return</span> [result autorelease];
                } <span class="keywordflow">else</span> {
                        <span class="comment">//Release the sound source we just created, this will also unlock the source</span>
                        [result release];
                        <span class="keywordflow">return</span> nil;
                }
        } <span class="keywordflow">else</span> {
                <span class="comment">//No available source within that source group</span>
                <span class="keywordflow">return</span> nil;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e73b1f9ce070579469e18da0fdabf5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) <a class="el" href="interface_c_d_sound_engine.html#a9e73b1f9ce070579469e18da0fdabf5a">sourceGroupEnabled:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the mute property for the source group identified by sourceGroupId </p>
<div class="fragment"><pre class="fragment">                           :(int) sourceGroupId {
        <span class="keywordflow">return</span> _sourceGroups[sourceGroupId].enabled;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bbc63632a5e72c9235c39730e8efb38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_sound_engine.html#a8bbc63632a5e72c9235c39730e8efb38">stopAllSounds</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops all playing sounds </p>
<div class="fragment"><pre class="fragment">                       {
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; sourceTotal_; i++) {
                alSourceStop(_sources[i].sourceId);
        }
        alGetError();<span class="comment">//Clear error in case we stopped any sounds that couldn&#39;t be stopped</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2bbd23eefecd32afcf6bc0109b5e7a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_sound_engine.html#ae2bbd23eefecd32afcf6bc0109b5e7a2">stopSound:</a> </td>
          <td></td>
          <td class="paramtype">(ALuint)&#160;</td>
          <td class="paramname"><em>sourceId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops playing a sound</p>
<p>Stop a sound playing. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sourceId</td><td>an OpenAL source identifier i.e. the return value of playSound </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="interface_simple_audio_engine.html#a4d818613fe0acb6fa8dc9fac400327f0">SimpleAudioEngine::stopEffect:</a>.</p>
<div class="fragment"><pre class="fragment">                 :(ALuint) sourceId {
        <span class="keywordflow">if</span> (!functioning_) {
                <span class="keywordflow">return</span>;
        }
        alSourceStop(sourceId);
        alGetError();<span class="comment">//Clear error in case we stopped any sounds that couldn&#39;t be stopped</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d6fbd530895fac2ce486a478e46fb23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_d_sound_engine.html#a5d6fbd530895fac2ce486a478e46fb23">stopSourceGroup:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>sourceGroupId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops playing a source group</p>
<p>Stop all sounds playing within a source group </p>

<p>Referenced by <a class="el" href="interface_c_d_sound_engine.html#af2e9e6ed68c37e25d2b9c7a671ab0ea4">setSourceGroupEnabled:enabled:</a>.</p>
<div class="fragment"><pre class="fragment">                        :(int) sourceGroupId {

        <span class="keywordflow">if</span> (!functioning_ || sourceGroupId &gt;= _sourceGroupTotal || sourceGroupId &lt; 0) {
                <span class="keywordflow">return</span>;
        }
        <span class="keywordtype">int</span> sourceCount = _sourceGroups[sourceGroupId].totalSources;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; sourceCount; i++) {
                <span class="keywordtype">int</span> sourceIndex = _sourceGroups[sourceGroupId].sourceStatuses[i] &gt;&gt; 1;
                alSourceStop(_sources[sourceIndex].sourceId);
        }
        alGetError();<span class="comment">//Clear error in case we stopped any sounds that couldn&#39;t be stopped</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2a245d09bd9aa88de752c97dd889662e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) <a class="el" href="interface_c_d_sound_engine.html#a2a245d09bd9aa88de752c97dd889662e">unloadBuffer:</a> </td>
          <td></td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"><em>soundId</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete the buffer identified by soundId </p>
<dl class="section return"><dt>Returns:</dt><dd>true if buffer deleted successfully, otherwise false </dd></dl>
<div class="fragment"><pre class="fragment">                     :(int) soundId
{
        <span class="comment">//Ensure soundId is within array bounds otherwise memory corruption will occur</span>
        <span class="keywordflow">if</span> (soundId &lt; 0 || soundId &gt;= bufferTotal) {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - soundId is outside array bounds, maybe you need to increase CD_MAX_BUFFERS&quot;</span>);
                <span class="keywordflow">return</span> FALSE;
        }

        <span class="comment">//Before a buffer can be deleted any sources that are attached to it must be stopped</span>
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; sourceTotal_; i++) {
                <span class="comment">//Note: tried getting the AL_BUFFER attribute of the source instead but doesn&#39;t</span>
                <span class="comment">//appear to work on a device - just returned zero.</span>
                <span class="keywordflow">if</span> (_buffers[soundId].bufferId == _sources[i].attachedBufferId) {

                        CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - Found attached source %i %i %i&quot;</span>,i,_buffers[soundId].bufferId,_sources[i].sourceId);
<span class="preprocessor">#ifdef CD_USE_STATIC_BUFFERS</span>
<span class="preprocessor"></span>                        <span class="comment">//When using static buffers a crash may occur if a source is playing with a buffer that is about</span>
                        <span class="comment">//to be deleted even though we stop the source and successfully delete the buffer. Crash is confirmed</span>
                        <span class="comment">//on 2.2.1 and 3.1.2, however, it will only occur if a source is used rapidly after having its prior</span>
                        <span class="comment">//data deleted. To avoid any possibility of the crash we wait for the source to finish playing.</span>
                        ALint state;

                        alGetSourcei(_sources[i].sourceId, AL_SOURCE_STATE, &amp;state);

                        <span class="keywordflow">if</span> (state == AL_PLAYING) {
                                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - waiting for source to complete playing before removing buffer data&quot;</span>);
                                alSourcei(_sources[i].sourceId, AL_LOOPING, FALSE);<span class="comment">//Turn off looping otherwise loops will never end</span>
                                <span class="keywordflow">while</span> (state == AL_PLAYING) {
                                        alGetSourcei(_sources[i].sourceId, AL_SOURCE_STATE, &amp;state);
                                        usleep(10000);
                                }
                        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                        <span class="comment">//Stop source and detach</span>
                        alSourceStop(_sources[i].sourceId);
                        <span class="keywordflow">if</span>((lastErrorCode_ = alGetError()) != AL_NO_ERROR) {
                                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - error stopping source: %x\n&quot;</span>, lastErrorCode_);
                        }

                        alSourcei(_sources[i].sourceId, AL_BUFFER, 0);<span class="comment">//Attach to &quot;NULL&quot; buffer to detach</span>
                        <span class="keywordflow">if</span>((lastErrorCode_ = alGetError()) != AL_NO_ERROR) {
                                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - error detaching buffer: %x\n&quot;</span>, lastErrorCode_);
                        } <span class="keywordflow">else</span> {
                                <span class="comment">//Record that source is now attached to nothing</span>
                                _sources[i].attachedBufferId = 0;
                        }
                }
        }

        alDeleteBuffers(1, &amp;_buffers[soundId].bufferId);
        <span class="keywordflow">if</span>((lastErrorCode_ = alGetError()) != AL_NO_ERROR) {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - error deleting buffer: %x\n&quot;</span>, lastErrorCode_);
                _buffers[soundId].bufferState = CD_BS_FAILED;
                <span class="keywordflow">return</span> FALSE;
        } <span class="keywordflow">else</span> {
<span class="preprocessor">#ifdef CD_USE_STATIC_BUFFERS</span>
<span class="preprocessor"></span>                <span class="comment">//Free previous data, if alDeleteBuffer has returned without error then no</span>
                <span class="keywordflow">if</span> (_buffers[soundId].bufferData) {
                        CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - freeing static data for soundId %i @ %i&quot;</span>,soundId,_buffers[soundId].bufferData);
                        free(_buffers[soundId].bufferData);<span class="comment">//Free the old data</span>
                        _buffers[soundId].bufferData = NULL;
                }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }

        alGenBuffers(1, &amp;_buffers[soundId].bufferId);
        <span class="keywordflow">if</span>((lastErrorCode_ = alGetError()) != AL_NO_ERROR) {
                CDLOG(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - error regenerating buffer: %x\n&quot;</span>, lastErrorCode_);
                _buffers[soundId].bufferState = CD_BS_FAILED;
                <span class="keywordflow">return</span> FALSE;
        } <span class="keywordflow">else</span> {
                <span class="comment">//We now have an empty buffer</span>
                _buffers[soundId].bufferState = CD_BS_EMPTY;
                CDLOGINFO(<span class="stringliteral">@&quot;Denshion::CDSoundEngine - buffer %i successfully unloaded\n&quot;</span>,soundId);
                <span class="keywordflow">return</span> TRUE;
        }
}
</pre></div>
</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="a2e416630cc0722eac6ba889dcb9461ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSUInteger) <a class="el" href="interface_c_d_sound_engine.html#a2e416630cc0722eac6ba889dcb9461ba">sourceGroupTotal</a><code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of source groups that have been defined </p>

</div>
</div>
<a class="anchor" id="a951c8a98f46192e4ed56ebe41f7abe59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (int) <a class="el" href="interface_c_d_sound_engine.html#a951c8a98f46192e4ed56ebe41f7abe59">sourceTotal</a><code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of sources available </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/CocosDenshion/CocosDenshion/<a class="el" href="_cocos_denshion_8h_source.html">CocosDenshion.h</a></li>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/CocosDenshion/CocosDenshion/CocosDenshion.m</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interface_c_d_sound_engine.html">CDSoundEngine</a>      </li>

    <li class="footer">Generated on Wed Jan 30 2013 23:41:12 for cocos2d-iphone-2.1-beta4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
