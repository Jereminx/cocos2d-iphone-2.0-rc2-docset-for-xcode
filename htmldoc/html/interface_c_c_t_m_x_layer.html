<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cocos2d-iphone-2.1-beta4: CCTMXLayer Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos2d-iphone-2.1-beta4
   &#160;<span id="projectnumber">2.1-beta4</span>
   </div>
   <div id="projectbrief">zhxubing@gmail.com</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interface_c_c_t_m_x_layer.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CCTMXLayer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;<a class="el" href="_c_c_t_m_x_layer_8h_source.html">CCTMXLayer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CCTMXLayer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_c_c_t_m_x_layer.png" usemap="#CCTMXLayer_map" alt=""/>
  <map id="CCTMXLayer_map" name="CCTMXLayer_map">
<area href="interface_c_c_sprite_batch_node.html" alt="CCSpriteBatchNode" shape="rect" coords="71,112,204,136"/>
<area href="class_c_c_node.html" alt="CCNode" shape="rect" coords="0,56,133,80"/>
<area href="protocol_c_c_texture_protocol-p.html" alt="&lt;CCTextureProtocol&gt;" shape="rect" coords="143,56,276,80"/>
<area href="class_n_s_object.html" alt="NSObject" shape="rect" coords="0,0,133,24"/>
<area href="protocol_c_c_blend_protocol-p.html" alt="&lt;CCBlendProtocol&gt;" shape="rect" coords="143,0,276,24"/>
</map>
 </div></div>

<p><a href="class_c_c_t_m_x_layer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a33a9fb3afbeaff1c7c944871cc36dc8e"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a33a9fb3afbeaff1c7c944871cc36dc8e">initWithTilesetInfo:layerInfo:mapInfo:</a></td></tr>
<tr class="memitem:a6da51144eb6bc5fbdb10cecb1dd9dd95"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a6da51144eb6bc5fbdb10cecb1dd9dd95">releaseMap</a></td></tr>
<tr class="memitem:acf0ee39e7670ebf4cd0dcd806c0b0897"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="class_c_c_sprite.html">CCSprite</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#acf0ee39e7670ebf4cd0dcd806c0b0897">tileAt:</a></td></tr>
<tr class="memitem:a22f4a950562db2473c188df39e5fc89c"><td class="memItemLeft" align="right" valign="top">(uint32_t)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a22f4a950562db2473c188df39e5fc89c">tileGIDAt:</a></td></tr>
<tr class="memitem:afe712473b73e0d12d132cf8fc0c49436"><td class="memItemLeft" align="right" valign="top">(uint32_t)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#afe712473b73e0d12d132cf8fc0c49436">tileGIDAt:withFlags:</a></td></tr>
<tr class="memitem:a040599b66314082e02b3a7fbb923eca9"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a040599b66314082e02b3a7fbb923eca9">setTileGID:at:</a></td></tr>
<tr class="memitem:af5a1be12e5457e4d3e54894953a0e041"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#af5a1be12e5457e4d3e54894953a0e041">setTileGID:at:withFlags:</a></td></tr>
<tr class="memitem:a776ac1404ff793782b5dcf55a3025909"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a776ac1404ff793782b5dcf55a3025909">removeTileAt:</a></td></tr>
<tr class="memitem:ac8b24455f15f4ec4ad9f7c46dcfa2ba3"><td class="memItemLeft" align="right" valign="top">(CGPoint)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#ac8b24455f15f4ec4ad9f7c46dcfa2ba3">positionAt:</a></td></tr>
<tr class="memitem:a93cde7e27d79b8471ae7022ca8f3477d"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a93cde7e27d79b8471ae7022ca8f3477d">propertyNamed:</a></td></tr>
<tr class="memitem:a2907ea3d49257923efeccd65803f8862"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a2907ea3d49257923efeccd65803f8862">setupTiles</a></td></tr>
<tr class="memitem:a898f8a54b02cc7cdfc9236177d93a2c0"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c_t_m_x_layer.html#a898f8a54b02cc7cdfc9236177d93a2c0">addChild:z:tag:</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a77aae0dac98b55e7dd6bfc80e9338e52"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_c_t_m_x_layer.html#a77aae0dac98b55e7dd6bfc80e9338e52">layerWithTilesetInfo:layerInfo:mapInfo:</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a84b0fb090e8d531b216c230f2334b2d7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a84b0fb090e8d531b216c230f2334b2d7"></a>
<a class="el" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>tileset_</b></td></tr>
<tr class="memitem:aba00371b851c2fbf3c78bc037251ed09"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba00371b851c2fbf3c78bc037251ed09"></a>
NSString *&#160;</td><td class="memItemRight" valign="bottom"><b>layerName_</b></td></tr>
<tr class="memitem:a4320ee359aac0539e3663550c6f9dd83"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4320ee359aac0539e3663550c6f9dd83"></a>
CGSize&#160;</td><td class="memItemRight" valign="bottom"><b>layerSize_</b></td></tr>
<tr class="memitem:ac0f56263b1d585707b00d4c7a1fe3bbb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac0f56263b1d585707b00d4c7a1fe3bbb"></a>
CGSize&#160;</td><td class="memItemRight" valign="bottom"><b>mapTileSize_</b></td></tr>
<tr class="memitem:a49aba95c0f53a51a3b2dda6052d2e175"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49aba95c0f53a51a3b2dda6052d2e175"></a>
uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><b>tiles_</b></td></tr>
<tr class="memitem:ab193a163da7b8af9fecbba8c3fd81e0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab193a163da7b8af9fecbba8c3fd81e0d"></a>
NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><b>layerOrientation_</b></td></tr>
<tr class="memitem:ab4ca5a686a9bc3e522a0881c47818e1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4ca5a686a9bc3e522a0881c47818e1f"></a>
NSMutableArray *&#160;</td><td class="memItemRight" valign="bottom"><b>properties_</b></td></tr>
<tr class="memitem:a627f84c30da154053c5b394648034263"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a627f84c30da154053c5b394648034263"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><b>opacity_</b></td></tr>
<tr class="memitem:a1c9b17097327be81e29f38a4359f300a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c9b17097327be81e29f38a4359f300a"></a>
NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><b>minGID_</b></td></tr>
<tr class="memitem:a5f90541c70209a7f5c9a6e4921f67fb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f90541c70209a7f5c9a6e4921f67fb9"></a>
NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><b>maxGID_</b></td></tr>
<tr class="memitem:a407c28600f59813804de9dafe6a5c511"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a407c28600f59813804de9dafe6a5c511"></a>
NSInteger&#160;</td><td class="memItemRight" valign="bottom"><b>vertexZvalue_</b></td></tr>
<tr class="memitem:a09779adfe3d1623075c54bd077077659"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09779adfe3d1623075c54bd077077659"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>useAutomaticVertexZ_</b></td></tr>
<tr class="memitem:adb619b53d05e04a937ec7e9ce650fbb4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb619b53d05e04a937ec7e9ce650fbb4"></a>
<a class="el" href="class_c_c_sprite.html">CCSprite</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>reusedTile_</b></td></tr>
<tr class="memitem:a1e928e1923db5c5eb598dd7309da71d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e928e1923db5c5eb598dd7309da71d3"></a>
<a class="el" href="structcc_array.html">ccCArray</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>atlasIndexArray_</b></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ae62640f00d84efb58df4eb90e3913700"><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#ae62640f00d84efb58df4eb90e3913700">layerName</a></td></tr>
<tr class="memitem:a4d680b868f0e476d8a51e52d3c4ff64e"><td class="memItemLeft" align="right" valign="top">CGSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#a4d680b868f0e476d8a51e52d3c4ff64e">layerSize</a></td></tr>
<tr class="memitem:a13536a56d5a74341e766d8918a2c9013"><td class="memItemLeft" align="right" valign="top">CGSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#a13536a56d5a74341e766d8918a2c9013">mapTileSize</a></td></tr>
<tr class="memitem:a37c6ea184edaec1b0ba8f82cf2c386c8"><td class="memItemLeft" align="right" valign="top">uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#a37c6ea184edaec1b0ba8f82cf2c386c8">tiles</a></td></tr>
<tr class="memitem:afb0c60d744928f1ebbe66010448cdcce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#afb0c60d744928f1ebbe66010448cdcce">tileset</a></td></tr>
<tr class="memitem:ab1be7f739da6da05fbc11da0e2c647f9"><td class="memItemLeft" align="right" valign="top">NSUInteger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#ab1be7f739da6da05fbc11da0e2c647f9">layerOrientation</a></td></tr>
<tr class="memitem:a3fcc631e6c87920daa231095c62b3344"><td class="memItemLeft" align="right" valign="top">NSMutableArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c_t_m_x_layer.html#a3fcc631e6c87920daa231095c62b3344">properties</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a> represents the TMX layer.</p>
<p>It is a subclass of <a class="el" href="interface_c_c_sprite_batch_node.html">CCSpriteBatchNode</a>. By default the tiles are rendered using a <a class="el" href="interface_c_c_texture_atlas.html">CCTextureAtlas</a>. If you mofify a tile on runtime, then, that tile will become a <a class="el" href="class_c_c_sprite.html">CCSprite</a>, otherwise no <a class="el" href="class_c_c_sprite.html">CCSprite</a> objects are created. The benefits of using <a class="el" href="class_c_c_sprite.html">CCSprite</a> objects as tiles are:</p>
<ul>
<li>tiles (<a class="el" href="class_c_c_sprite.html">CCSprite</a>) can be rotated/scaled/moved with a nice API</li>
</ul>
<p>cocos2d v2.0 doesn't support the cc_vertexz value. Whenever a the cc_vertexz property is found, it will raise an exception.</p>
<p>"value" by default is 0, but you can change it from Tiled by adding the "cc_alpha_func" property to the layer. The value 0 should work for most cases, but if you have tiles that are semi-transparent, then you might want to use a differnt value, like 0.5.</p>
<p>For further information, please see the programming guide: </p>
<div class="fragment"><pre class="fragment">   http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:tiled_maps</pre></div> <dl class="section since"><dt>Since:</dt><dd>v0.8.1</dd></dl>
<p><a class="el" href="class_tiles.html">Tiles</a> can have tile flags for additional properties. At the moment only flip horizontal and flip vertical are used. These bit flags are defined in <a class="el" href="_c_c_t_m_x_x_m_l_parser_8h_source.html">CCTMXXMLParser.h</a>.</p>
<dl class="section since"><dt>Since:</dt><dd>1.1 </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a898f8a54b02cc7cdfc9236177d93a2c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="class_c_c_node.html#afa69e08c50aa394c748dcb585cbcb4df">addChild:</a> </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_c_node.html">CCNode</a>*)&#160;</td>
          <td class="paramname"><em>node</em></td>
        </tr>
        <tr>
          <td class="paramkey">z:</td>
          <td></td>
          <td class="paramtype">(NSInteger)&#160;</td>
          <td class="paramname"><em>z</em></td>
        </tr>
        <tr>
          <td class="paramkey">tag:</td>
          <td></td>
          <td class="paramtype">(NSInteger)&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a> doesn't support adding a <a class="el" href="class_c_c_sprite.html">CCSprite</a> manually. </p>
<dl class="section warning"><dt>Warning:</dt><dd>addchild:z:tag: is not supported on <a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a>. Instead of setTileGID:at:/tileAt: </dd></dl>

<p>Reimplemented from <a class="el" href="class_c_c_node.html#ab3e142f4e18581046f811ae1489dd0c9">CCNode</a>.</p>
<div class="fragment"><pre class="fragment">                : (<a class="code" href="class_c_c_node.html">CCNode</a>*)node z:(NSInteger)z <a class="code" href="class_c_c_node.html#a4ed1d0596afb7822a87e41b75b496af3">tag</a>:(NSInteger)<a class="code" href="class_c_c_node.html#a4ed1d0596afb7822a87e41b75b496af3">tag</a>
{
        NSAssert(NO, <span class="stringliteral">@&quot;addChild: is not supported on CCTMXLayer. Instead use setTileGID:at:/tileAt:&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a33a9fb3afbeaff1c7c944871cc36dc8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithTilesetInfo: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a>*)&#160;</td>
          <td class="paramname"><em>tilesetInfo</em></td>
        </tr>
        <tr>
          <td class="paramkey">layerInfo:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_layer_info.html">CCTMXLayerInfo</a>*)&#160;</td>
          <td class="paramname"><em>layerInfo</em></td>
        </tr>
        <tr>
          <td class="paramkey">mapInfo:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_map_info.html">CCTMXMapInfo</a>*)&#160;</td>
          <td class="paramname"><em>mapInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>initializes a <a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a> with a tileset info, a layer info and a map info </p>
<div class="fragment"><pre class="fragment">                         :(<a class="code" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a>*)tilesetInfo layerInfo:(<a class="code" href="interface_c_c_t_m_x_layer_info.html">CCTMXLayerInfo</a>*)layerInfo mapInfo:(<a class="code" href="interface_c_c_t_m_x_map_info.html">CCTMXMapInfo</a>*)mapInfo
{
        <span class="comment">// XXX: is 35% a good estimate ?</span>
        CGSize size = layerInfo.layerSize;
        <span class="keywordtype">float</span> totalNumberOfTiles = size.width * size.height;
        <span class="keywordtype">float</span> capacity = totalNumberOfTiles * 0.35f + 1; <span class="comment">// 35 percent is occupied ?</span>

        <a class="code" href="class_c_c_texture2_d.html">CCTexture2D</a> *tex = nil;
        <span class="keywordflow">if</span>( tilesetInfo )
                tex = [[<a class="code" href="interface_c_c_texture_cache.html">CCTextureCache</a> <a class="code" href="interface_c_c_texture_cache.html#a165dc20d3e1be71265250c70f735fc40">sharedTextureCache</a>] <a class="code" href="interface_c_c_texture_cache.html#a76f5cb737d48b8046756b033b5da93cf">addImage</a>:tilesetInfo.sourceImage];

        <span class="keywordflow">if</span>((<span class="keyword">self</span> = [super initWithTexture:tex capacity:capacity])) {

                <span class="comment">// layerInfo</span>
                <span class="keyword">self</span>.layerName = layerInfo.name;
                layerSize_ = size;
                tiles_ = layerInfo.tiles;
                minGID_ = layerInfo.minGID;
                maxGID_ = layerInfo.maxGID;
                opacity_ = layerInfo.opacity;
                <span class="keyword">self</span>.properties = [NSMutableDictionary dictionaryWithDictionary:layerInfo.properties];

                <span class="comment">// tilesetInfo</span>
                <span class="keyword">self</span>.tileset = tilesetInfo;

                <span class="comment">// mapInfo</span>
                mapTileSize_ = mapInfo.tileSize;
                layerOrientation_ = mapInfo.orientation;

                <span class="comment">// offset (after layer orientation is set);</span>
                CGPoint offset = [<span class="keyword">self</span> calculateLayerOffset:layerInfo.offset];
                [<span class="keyword">self</span> setPosition:CC_POINT_PIXELS_TO_POINTS(offset)];

                atlasIndexArray_ = <a class="code" href="cc_c_array_8h.html#af8209888babee1167a496d4435383b50">ccCArrayNew</a>(totalNumberOfTiles);

                [<span class="keyword">self</span> setContentSize:CC_SIZE_PIXELS_TO_POINTS(CGSizeMake( layerSize_.width * mapTileSize_.width, layerSize_.height * mapTileSize_.height ))];

                useAutomaticVertexZ_= NO;
                vertexZvalue_ = 0;
        }

        <span class="keywordflow">return</span> <span class="keyword">self</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77aae0dac98b55e7dd6bfc80e9338e52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (id) layerWithTilesetInfo: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a>*)&#160;</td>
          <td class="paramname"><em>tilesetInfo</em></td>
        </tr>
        <tr>
          <td class="paramkey">layerInfo:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_layer_info.html">CCTMXLayerInfo</a>*)&#160;</td>
          <td class="paramname"><em>layerInfo</em></td>
        </tr>
        <tr>
          <td class="paramkey">mapInfo:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c_t_m_x_map_info.html">CCTMXMapInfo</a>*)&#160;</td>
          <td class="paramname"><em>mapInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>creates a <a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a> with an tileset info, a layer info and a map info </p>
<div class="fragment"><pre class="fragment">                          :(<a class="code" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a>*)tilesetInfo layerInfo:(<a class="code" href="interface_c_c_t_m_x_layer_info.html">CCTMXLayerInfo</a>*)layerInfo mapInfo:(<a class="code" href="interface_c_c_t_m_x_map_info.html">CCTMXMapInfo</a>*)mapInfo
{
        <span class="keywordflow">return</span> [[[<span class="keyword">self</span> alloc] initWithTilesetInfo:tilesetInfo layerInfo:layerInfo mapInfo:mapInfo] autorelease];
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8b24455f15f4ec4ad9f7c46dcfa2ba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (CGPoint) <a class="el" href="interface_c_c_t_m_x_layer.html#ac8b24455f15f4ec4ad9f7c46dcfa2ba3">positionAt:</a> </td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tileCoordinate</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>returns the position in points of a given tile coordinate </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_layer.html#acf0ee39e7670ebf4cd0dcd806c0b0897">tileAt:</a>.</p>
<div class="fragment"><pre class="fragment">                     :(CGPoint)pos
{
        CGPoint ret = CGPointZero;
        <span class="keywordflow">switch</span>( layerOrientation_ ) {
                <span class="keywordflow">case</span> CCTMXOrientationOrtho:
                        ret = [<span class="keyword">self</span> positionForOrthoAt:pos];
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> CCTMXOrientationIso:
                        ret = [<span class="keyword">self</span> positionForIsoAt:pos];
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> CCTMXOrientationHex:
                        ret = [<span class="keyword">self</span> positionForHexAt:pos];
                        <span class="keywordflow">break</span>;
        }

        ret = CC_POINT_PIXELS_TO_POINTS( ret );
        <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a93cde7e27d79b8471ae7022ca8f3477d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) <a class="el" href="interface_c_c_t_m_x_layer.html#a93cde7e27d79b8471ae7022ca8f3477d">propertyNamed:</a> </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>propertyName</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>return the value for the specific property name </p>
<div class="fragment"><pre class="fragment">                   :(NSString *)propertyName
{
        <span class="keywordflow">return</span> [properties_ valueForKey:propertyName];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6da51144eb6bc5fbdb10cecb1dd9dd95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_c_t_m_x_layer.html#a6da51144eb6bc5fbdb10cecb1dd9dd95">releaseMap</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dealloc the map that contains the tile position from memory. Unless you want to know at runtime the tiles positions, you can safely call this method. If you are going to call [layer tileGIDAt:] then, don't release the map </p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span>( tiles_) {
                free( tiles_);
                tiles_ = NULL;
        }

        <span class="keywordflow">if</span>( atlasIndexArray_ ) {
                <a class="code" href="cc_c_array_8h.html#aede88419801cd2b42e3114b4afc6f2dc">ccCArrayFree</a>(atlasIndexArray_);
                atlasIndexArray_ = NULL;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a776ac1404ff793782b5dcf55a3025909"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_c_t_m_x_layer.html#a776ac1404ff793782b5dcf55a3025909">removeTileAt:</a> </td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tileCoordinate</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>removes a tile at given tile coordinate </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_layer.html#af5a1be12e5457e4d3e54894953a0e041">setTileGID:at:withFlags:</a>.</p>
<div class="fragment"><pre class="fragment">                    :(CGPoint)pos
{
        NSAssert( pos.x &lt; layerSize_.width &amp;&amp; pos.y &lt; layerSize_.height &amp;&amp; pos.x &gt;=0 &amp;&amp; pos.y &gt;=0, <span class="stringliteral">@&quot;TMXLayer: invalid position&quot;</span>);
        NSAssert( tiles_ &amp;&amp; atlasIndexArray_, <span class="stringliteral">@&quot;TMXLayer: the tiles map has been released&quot;</span>);

        uint32_t gid = [<span class="keyword">self</span> tileGIDAt:pos];

        <span class="keywordflow">if</span>( gid ) {

                NSUInteger z = pos.x + pos.y * layerSize_.width;
                NSUInteger atlasIndex = [<span class="keyword">self</span> atlasIndexForExistantZ:z];

                <span class="comment">// remove tile from GID map</span>
                tiles_[z] = 0;

                <span class="comment">// remove tile from atlas position array</span>
                <a class="code" href="cc_c_array_8h.html#a7f743211d5bde3387d3b319aaf4d8a3b">ccCArrayRemoveValueAtIndex</a>(atlasIndexArray_, atlasIndex);

                <span class="comment">// remove it from sprites and/or texture atlas</span>
                <span class="keywordtype">id</span> sprite = [<span class="keyword">self</span> getChildByTag:z];
                <span class="keywordflow">if</span>( sprite )
                        [<span class="keyword">super</span> removeChild:sprite cleanup:YES];
                <span class="keywordflow">else</span> {
                        [textureAtlas_ removeQuadAtIndex:atlasIndex];

                        <span class="comment">// update possible children</span>
                        CCARRAY_FOREACH(children_, sprite) {
                                NSUInteger ai = [sprite atlasIndex];
                                <span class="keywordflow">if</span>( ai &gt;= atlasIndex) {
                                        [sprite setAtlasIndex: ai-1];
                                }
                        }
                }
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a040599b66314082e02b3a7fbb923eca9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setTileGID: </td>
          <td></td>
          <td class="paramtype">(uint32_t)&#160;</td>
          <td class="paramname"><em>gid</em></td>
        </tr>
        <tr>
          <td class="paramkey">at:</td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tileCoordinate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sets the tile gid (gid = tile global id) at a given tile coordinate. The <a class="el" href="struct_tile.html">Tile</a> GID can be obtained by using the method "tileGIDAt" or by using the TMX editor -&gt; Tileset Mgr +1. If a tile is already placed at that position, then it will be removed. </p>
<div class="fragment"><pre class="fragment">                  :(uint32_t)gid at:(CGPoint)pos
{
        [<span class="keyword">self</span> setTileGID:gid at:pos withFlags:NO];      
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5a1be12e5457e4d3e54894953a0e041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setTileGID: </td>
          <td></td>
          <td class="paramtype">(uint32_t)&#160;</td>
          <td class="paramname"><em>gid</em></td>
        </tr>
        <tr>
          <td class="paramkey">at:</td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>pos</em></td>
        </tr>
        <tr>
          <td class="paramkey">withFlags:</td>
          <td></td>
          <td class="paramtype">(ccTMXTileFlags)&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sets the tile gid (gid = tile global id) at a given tile coordinate. The <a class="el" href="struct_tile.html">Tile</a> GID can be obtained by using the method "tileGIDAt" or by using the TMX editor -&gt; Tileset Mgr +1. If a tile is already placed at that position, then it will be removed.</p>
<p>Use withFlags if the tile flags need to be changed as well </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_layer.html#a040599b66314082e02b3a7fbb923eca9">setTileGID:at:</a>.</p>
<div class="fragment"><pre class="fragment">                  :(uint32_t)gid at:(CGPoint)pos withFlags:(ccTMXTileFlags)flags
{
        NSAssert( pos.x &lt; layerSize_.width &amp;&amp; pos.y &lt; layerSize_.height &amp;&amp; pos.x &gt;=0 &amp;&amp; pos.y &gt;=0, <span class="stringliteral">@&quot;TMXLayer: invalid position&quot;</span>);
        NSAssert( tiles_ &amp;&amp; atlasIndexArray_, <span class="stringliteral">@&quot;TMXLayer: the tiles map has been released&quot;</span>);
        NSAssert( gid == 0 || gid &gt;= tileset_.firstGid, <span class="stringliteral">@&quot;TMXLayer: invalid gid&quot;</span> );

        ccTMXTileFlags currentFlags;
        uint32_t currentGID = [<span class="keyword">self</span> tileGIDAt:pos withFlags:&amp;currentFlags];
        
        <span class="keywordflow">if</span> (currentGID != gid || currentFlags != flags )
        {
                uint32_t gidAndFlags = gid | flags;

                <span class="comment">// setting gid=0 is equal to remove the tile</span>
                <span class="keywordflow">if</span>( gid == 0 )
                        [<span class="keyword">self</span> removeTileAt:pos];

                <span class="comment">// empty tile. create a new one</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>( currentGID == 0 )
                        [<span class="keyword">self</span> insertTileForGID:gidAndFlags at:pos];

                <span class="comment">// modifying an existing tile with a non-empty tile</span>
                <span class="keywordflow">else</span> {

                        NSUInteger z = pos.x + pos.y * layerSize_.width;
                        <a class="code" href="class_c_c_sprite.html">CCSprite</a> *sprite = (<a class="code" href="class_c_c_sprite.html">CCSprite</a>*)[<span class="keyword">self</span> getChildByTag:z];
                        <span class="keywordflow">if</span>( sprite ) {
                                CGRect rect = [tileset_ rectForGID:gid];
                                rect = CC_RECT_PIXELS_TO_POINTS(rect);

                                [sprite <a class="code" href="class_c_c_sprite.html#a737e6f7fb561d41bf54939c94fdeb169">setTextureRect</a>:rect <a class="code" href="class_c_c_sprite.html#a737e6f7fb561d41bf54939c94fdeb169">rotated</a>:NO <a class="code" href="class_c_c_sprite.html#a737e6f7fb561d41bf54939c94fdeb169">untrimmedSize</a>:rect.size];

                                <span class="keywordflow">if</span> (flags) 
                                        [<span class="keyword">self</span> setupTileSprite:sprite position:[sprite <a class="code" href="class_c_c_node.html#a297b5e96d7c1372d35589a924e1eb286">position</a>] withGID:gidAndFlags];

                                tiles_[z] = gidAndFlags;
                        } <span class="keywordflow">else</span>
                                [<span class="keyword">self</span> updateTileForGID:gidAndFlags at:pos];
                }
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2907ea3d49257923efeccd65803f8862"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) <a class="el" href="interface_c_c_t_m_x_layer.html#a2907ea3d49257923efeccd65803f8862">setupTiles</a> </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates the tiles </p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">// Optimization: quick hack that sets the image size on the tileset</span>
        tileset_.imageSize = [textureAtlas_.texture contentSizeInPixels];

        <span class="comment">// By default all the tiles are aliased</span>
        <span class="comment">// pros:</span>
        <span class="comment">//  - easier to render</span>
        <span class="comment">// cons:</span>
        <span class="comment">//  - difficult to scale / rotate / etc.</span>
        [textureAtlas_.texture setAliasTexParameters];

        <span class="comment">// Parse cocos2d properties</span>
        [<span class="keyword">self</span> parseInternalProperties];

        <span class="keywordflow">for</span>( NSUInteger y = 0; y &lt; layerSize_.height; y++ ) {
                <span class="keywordflow">for</span>( NSUInteger x = 0; x &lt; layerSize_.width; x++ ) {

                        NSUInteger pos = x + layerSize_.width * y;
                        uint32_t gid = tiles_[ pos ];

                        <span class="comment">// gid are stored in little endian.</span>
                        <span class="comment">// if host is big endian, then swap</span>
                        gid = CFSwapInt32LittleToHost( gid );

                        <span class="comment">// XXX: gid == 0 --&gt; empty tile</span>
                        <span class="keywordflow">if</span>( gid != 0 ) {
                                [<span class="keyword">self</span> appendTileForGID:gid at:ccp(x,y)];

                                <span class="comment">// Optimization: update min and max GID rendered by the layer</span>
                                minGID_ = MIN(gid, minGID_);
                                maxGID_ = MAX(gid, maxGID_);
<span class="comment">//                              minGID_ = MIN((gid &amp; kFlippedMask), minGID_);</span>
<span class="comment">//                              maxGID_ = MAX((gid &amp; kFlippedMask), maxGID_);</span>
                        }
                }
        }

        NSAssert( maxGID_ &gt;= tileset_.firstGid &amp;&amp;
                         minGID_ &gt;= tileset_.firstGid, <span class="stringliteral">@&quot;TMX: Only 1 tilset per layer is supported&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acf0ee39e7670ebf4cd0dcd806c0b0897"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="class_c_c_sprite.html">CCSprite</a> *) <a class="el" href="interface_c_c_t_m_x_layer.html#acf0ee39e7670ebf4cd0dcd806c0b0897">tileAt:</a> </td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tileCoordinate</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>returns the tile (<a class="el" href="class_c_c_sprite.html">CCSprite</a>) at a given a tile coordinate. The returned <a class="el" href="class_c_c_sprite.html">CCSprite</a> will be already added to the <a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a>. Don't add it again. The <a class="el" href="class_c_c_sprite.html">CCSprite</a> can be treated like any other <a class="el" href="class_c_c_sprite.html">CCSprite</a>: rotated, scaled, translated, opacity, color, etc. You can remove either by calling:</p>
<ul>
<li>[layer removeChild:sprite cleanup:cleanup];</li>
<li>or [layer removeTileAt:ccp(x,y)]; </li>
</ul>
<div class="fragment"><pre class="fragment">                   :(CGPoint)pos
{
        NSAssert( pos.x &lt; layerSize_.width &amp;&amp; pos.y &lt; layerSize_.height &amp;&amp; pos.x &gt;=0 &amp;&amp; pos.y &gt;=0, <span class="stringliteral">@&quot;TMXLayer: invalid position&quot;</span>);
        NSAssert( tiles_ &amp;&amp; atlasIndexArray_, <span class="stringliteral">@&quot;TMXLayer: the tiles map has been released&quot;</span>);

        <a class="code" href="class_c_c_sprite.html">CCSprite</a> *tile = nil;
        uint32_t gid = [<span class="keyword">self</span> tileGIDAt:pos];

        <span class="comment">// if GID == 0, then no tile is present</span>
        <span class="keywordflow">if</span>( gid ) {
                <span class="keywordtype">int</span> z = pos.x + pos.y * layerSize_.width;
                tile = (<a class="code" href="class_c_c_sprite.html">CCSprite</a>*) [<span class="keyword">self</span> getChildByTag:z];

                <span class="comment">// tile not created yet. create it</span>
                <span class="keywordflow">if</span>( ! tile ) {
                        CGRect rect = [tileset_ rectForGID:gid];
                        rect = CC_RECT_PIXELS_TO_POINTS(rect);
                        tile = [[<a class="code" href="class_c_c_sprite.html">CCSprite</a> alloc] initWithTexture:self.texture rect:rect];
                        [tile setBatchNode:self];

            CGPoint p = [<span class="keyword">self</span> positionAt:pos];
            [tile setPosition:p];
                        [tile setVertexZ: [<span class="keyword">self</span> vertexZForPos:pos]];
                        tile.<a class="code" href="class_c_c_node.html#ac24fc742eb11ee96207052639224434c">anchorPoint</a> = CGPointZero;
                        [tile <a class="code" href="protocol_c_c_r_g_b_a_protocol-p.html#a66324c50934259d3fc0e124cf0b7eca2">setOpacity</a>:opacity_];

                        NSUInteger indexForZ = [<span class="keyword">self</span> atlasIndexForExistantZ:z];
                        [<span class="keyword">self</span> addSpriteWithoutQuad:tile z:indexForZ tag:z];
                        [tile release];
                }
        }
        <span class="keywordflow">return</span> tile;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a22f4a950562db2473c188df39e5fc89c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (uint32_t) <a class="el" href="interface_c_c_t_m_x_layer.html#a22f4a950562db2473c188df39e5fc89c">tileGIDAt:</a> </td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tileCoordinate</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>returns the tile gid at a given tile coordinate. if it returns 0, it means that the tile is empty. This method requires the the tile map has not been previously released (eg. don't call [layer releaseMap]) </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_layer.html#a776ac1404ff793782b5dcf55a3025909">removeTileAt:</a>, and <a class="el" href="interface_c_c_t_m_x_layer.html#acf0ee39e7670ebf4cd0dcd806c0b0897">tileAt:</a>.</p>
<div class="fragment"><pre class="fragment">                     :(CGPoint)pos
{
        <span class="keywordflow">return</span> [<span class="keyword">self</span> tileGIDAt:pos withFlags:NULL];
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe712473b73e0d12d132cf8fc0c49436"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (uint32_t) <a class="el" href="interface_c_c_t_m_x_layer.html#a22f4a950562db2473c188df39e5fc89c">tileGIDAt:</a> </td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>pos</em></td>
        </tr>
        <tr>
          <td class="paramkey">withFlags:</td>
          <td></td>
          <td class="paramtype">(ccTMXTileFlags*)&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>returns the tile gid at a given tile coordinate. It also returns the tile flags. This method requires the the tile map has not been previously released (eg. don't call [layer releaseMap]) </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_layer.html#af5a1be12e5457e4d3e54894953a0e041">setTileGID:at:withFlags:</a>, and <a class="el" href="interface_c_c_t_m_x_layer.html#a22f4a950562db2473c188df39e5fc89c">tileGIDAt:</a>.</p>
<div class="fragment"><pre class="fragment">                     :(CGPoint)pos withFlags:(ccTMXTileFlags*)flags
{
        NSAssert( pos.x &lt; layerSize_.width &amp;&amp; pos.y &lt; layerSize_.height &amp;&amp; pos.x &gt;=0 &amp;&amp; pos.y &gt;=0, <span class="stringliteral">@&quot;TMXLayer: invalid position&quot;</span>);
        NSAssert( tiles_ &amp;&amp; atlasIndexArray_, <span class="stringliteral">@&quot;TMXLayer: the tiles map has been released&quot;</span>);

        NSInteger idx = pos.x + pos.y * layerSize_.width;

        <span class="comment">// Bits on the far end of the 32-bit global tile ID are used for tile flags</span>

        uint32_t tile = tiles_[idx];
        
        <span class="comment">// issue1264, flipped tiles can be changed dynamically</span>
        <span class="keywordflow">if</span> (flags)
                *flags = tile &amp; kCCFlipedAll;

        <span class="keywordflow">return</span> ( tile &amp; kCCFlippedMask);
}
</pre></div>
</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="ae62640f00d84efb58df4eb90e3913700"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) <a class="el" href="interface_c_c_t_m_x_layer.html#ae62640f00d84efb58df4eb90e3913700">layerName</a><code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>name of the layer </p>

<p>Referenced by <a class="el" href="interface_c_c_t_m_x_tiled_map.html#adac42afad2f47b8d4a51d8b44fd49d30">CCTMXTiledMap::layerNamed:</a>.</p>

</div>
</div>
<a class="anchor" id="ab1be7f739da6da05fbc11da0e2c647f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSUInteger) <a class="el" href="interface_c_c_t_m_x_layer.html#ab1be7f739da6da05fbc11da0e2c647f9">layerOrientation</a><code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Layer orientation, which is the same as the map orientation </p>

</div>
</div>
<a class="anchor" id="a4d680b868f0e476d8a51e52d3c4ff64e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (CGSize) <a class="el" href="interface_c_c_t_m_x_layer.html#a4d680b868f0e476d8a51e52d3c4ff64e">layerSize</a><code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>size of the layer in tiles </p>

</div>
</div>
<a class="anchor" id="a13536a56d5a74341e766d8918a2c9013"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (CGSize) <a class="el" href="interface_c_c_t_m_x_layer.html#a13536a56d5a74341e766d8918a2c9013">mapTileSize</a><code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>size of the map's tile (could be different from the tile's size) </p>

</div>
</div>
<a class="anchor" id="a3fcc631e6c87920daa231095c62b3344"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSMutableArray*) <a class="el" href="interface_c_c_t_m_x_layer.html#a3fcc631e6c87920daa231095c62b3344">properties</a><code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>properties from the layer. They can be added using Tiled </p>

</div>
</div>
<a class="anchor" id="a37c6ea184edaec1b0ba8f82cf2c386c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (uint32_t*) <a class="el" href="interface_c_c_t_m_x_layer.html#a37c6ea184edaec1b0ba8f82cf2c386c8">tiles</a><code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>pointer to the map of tiles </p>

</div>
</div>
<a class="anchor" id="afb0c60d744928f1ebbe66010448cdcce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c_t_m_x_tileset_info.html">CCTMXTilesetInfo</a>*) <a class="el" href="interface_c_c_t_m_x_layer.html#afb0c60d744928f1ebbe66010448cdcce">tileset</a><code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tileset information for the layer </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/cocos2d/<a class="el" href="_c_c_t_m_x_layer_8h_source.html">CCTMXLayer.h</a></li>
<li>/Bing/File/cocos2d/cocos2d-iphone/cocos2d-iphone-2.1-beta4/cocos2d/CCTMXLayer.m</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interface_c_c_t_m_x_layer.html">CCTMXLayer</a>      </li>

    <li class="footer">Generated on Wed Jan 30 2013 23:41:09 for cocos2d-iphone-2.1-beta4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
